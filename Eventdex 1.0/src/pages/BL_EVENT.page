<apex:page showHeader="false"  sidebar="false" standardController="BLN_Event__c" extensions="BLN_EventsConTest" id="eventpage">

<html><head>

<title>Boothleads-Event</title>
<apex:stylesheet value="{!URLFOR($Resource.createevents,'createevents/css/style.css')}"/> 
<apex:stylesheet value="{!URLFOR($Resource.createevents,'createevents/css/style-button.css')}"/>
<apex:stylesheet value="{!URLFOR($Resource.createevents,'createevents/css/jquery-ui-1.8.16.custom.css')}"/>

<apex:stylesheet value="{!URLFOR($Resource.createevents,'createevents/css/tables.css')}"/>

<apex:stylesheet value="{!URLFOR($Resource.createevents,'createevents/css/responsive.css')}"/>
<!--<apex:stylesheet value="{!URLFOR($Resource.Promocodes, 'promocodes/css/nwbuttons.css')}"/>-->
<apex:stylesheet value="{!URLFOR($Resource.createevents,'createevents/css/jquery.datetimepicker.css')}"/>
<apex:stylesheet value="{!URLFOR($Resource.createevents,'createevents/css/style4.css')}"/><!--css for next with arrow-->


<!-----------------------------------multiselect css for forms---------------------------------->
<!----------------------------------Validations---------------------------------------------->
  <!----------event section validation------------------------>
  <!----------------------------------Validations---------------------------------------------->
<!----------event section validation------------------------>
<!---------------------eventnameonblur validation-------------------------------->
<script>
function validation(){
    var weburl=document.getElementById("mweburl");
    var pno=document.getElementById("mphone");
    var zipcode=document.getElementById("mzipcode");
    var wresult=true,presult=true,zresult=true;
    
     if (weburl.value!=""){
        
        wresult=weburlvalid();
    }
    
    <!---------------->
     if (pno.value!=""){

        presult=pnovalid();
    }
    
    if(zipcode.value!=""){
        
        zresult=zipcodevalid();
    }
    
    var enresult=eventorgnamevalid();
    var eeresult=eventorgemailvalid();
    
    if(wresult==true&&presult==true&&zresult==true&&enresult==true&&eeresult==true){
    Alert5.Cancel();
    return true;}
    else
    return false;
    
    
}
<!-----------------calling weburl method------------->

function weburlvalid(){
var url=document.getElementById("mweburl").value;
    var pattern = /(http(s)?:\\)?([\w-]+\.)+[\w-]+[.com|.in|.org]+(\[\?%&=]*)?/;
    if(pattern.test(url)){
        
        
        document.getElementById("mweburl").style.border="1px solid #e3e3e3";
    document.getElementById("weburlerrormsg").style.display="none";
    
    return true;

        }
        else{
        document.getElementById("mweburl").style.border="2px solid #d43535";
document.getElementById("weburlerrormsg").style.display="";
         document.getElementById("mweburl").focus();
         return false;
        }
    
    }
    <!-----------------calling phone url validation method------------->
    function pnovalid(){
    
        var pnovalue=document.getElementById("mphone").value;
         var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;  
         
         if(phoneno.test(pnovalue)){
             
             document.getElementById("mphone").style.border="1px solid #e3e3e3";
    document.getElementById("pnoerrormsg").style.display="none";
    
      return true;  
             }
             else{
              document.getElementById("mphone").focus();
                  document.getElementById("mphone").style.border="2px solid #d43535";
    document.getElementById("pnoerrormsg").style.display="";
    return false;
             }
         
        
        }
    
<!-----------------calling zipcode validation method------------->
        function zipcodevalid(){
            var zipcodevalue=document.getElementById("mzipcode").value;
            var zipcodepattern=/^\d{5}(?:[-\s]\d{4})?$/;
            
            if(zipcodepattern.test(zipcodevalue)){
                
                
                 document.getElementById("mzipcode").style.border="1px solid #e3e3e3";
    document.getElementById("ziperrormsg").style.display="none";
    
      return true;
                }
            else {
             document.getElementById("mzipcode").focus();
                  document.getElementById("mzipcode").style.border="2px solid #d43535";
    document.getElementById("ziperrormsg").style.display="";
             document.getElementById("mzipcode").focus();
             return false;
            }
            }
        
function eventorgemailvalid(){
var url=document.getElementById("eventorgemail").value;
  
    if(url!=''){
        
        
        document.getElementById("eventorgemail").style.border="1px solid #e3e3e3";
    document.getElementById("eventorgemailerrormsg").style.display="none";
    
    return true;

        }
        else{
        document.getElementById("eventorgemail").style.border="2px solid #d43535";
document.getElementById("eventorgemailerrormsg").style.display="";
         document.getElementById("eventorgemail").focus();
         return false;
        }
    
    }
    
    function eventorgnamevalid(){
var url=document.getElementById("eventpage:searchform:searchValue").value;
   
    if(url!=''){
        
        
        document.getElementById("eventpage:searchform:searchValue").style.border="1px solid #e3e3e3";
    document.getElementById("eventorgnameerrormsg").style.display="none";
    
    return true;

        }
        else{
        document.getElementById("eventpage:searchform:searchValue").style.border="2px solid #d43535";
document.getElementById("eventorgnameerrormsg").style.display="";
         document.getElementById("eventpage:searchform:searchValue").focus();
         return false;
        }
    
    }

</script>

<script>
function ClearAll()
{
   document.getElementById('meventcat').value='';
   document.getElementById('meventdesc').value='';
   document.getElementById('mweburl').value='';
   document.getElementById('mphone').value='';
   document.getElementById('mhostaddr1').value='';
   document.getElementById('mhostaddr2').value='';
   document.getElementById('mcity').value='';
   document.getElementById('mstate').value='';
   document.getElementById('mzipcode').value='';
   //document.getElementById('mpobox').value='';
   document.getElementById('meventhashtag').value='';
   document.getElementById('mtwiturl').value='';
   document.getElementById('mfacebookurl').value='';
    
}

function eventnmblurvalid(){
if (document.getElementById("eventname").value== ""){
/alert("null");/
document.getElementById("eventname").style.border="2px solid #d43535";
document.getElementById("enerror").style.display="";
document.getElementById("ensuccess").style.display="none";

}
if (document.getElementById("eventname").value!= ""){
/alert("null");/
document.getElementById("eventname").style.border="2px solid #bac958";
document.getElementById("enerror").style.display="none";
document.getElementById("ensuccess").style.display="";

}

}
<!---------------------eventnameonkeyup validation-------------------------------->
function eventnmkeyupvalid(){


document.getElementById("eventname").style.border="1px solid #e3e3e3";
document.getElementById("enerror").style.display="none";
document.getElementById("ensuccess").style.display="none";
}


<!---------------------eventstartdateonblur validation-------------------------------->
function eventsdblurvalid(){
if (document.getElementById("eventsdate").value== ""){
/alert("null");/
document.getElementById("eventsdate").style.border="2px solid #d43535";
document.getElementById("endperror").style.display="";
document.getElementById("endpsuccess").style.display="none";

}
if (document.getElementById("eventsdate").value!= ""){
/alert("null");/
document.getElementById("eventsdate").style.border="2px solid #bac958";
document.getElementById("endperror").style.display="none";
document.getElementById("endpsuccess").style.display="";

}

}
<!---------------------eventstartdateonkeyup validation-------------------------------->
function eventsdkeyupvalid(){


document.getElementById("eventsdate").style.border="1px solid #e3e3e3";
document.getElementById("endperror").style.display="none";
document.getElementById("endpsuccess").style.display="none";
}


<!---------------------eventenddateonblur validation-------------------------------->
function eventedblurvalid(){
if (document.getElementById("eventedate").value== ""){
/alert("null");/
document.getElementById("eventedate").style.border="2px solid #d43535";
document.getElementById("endp1error").style.display="";
document.getElementById("endp1success").style.display="none";

}
if (document.getElementById("eventedate").value!= ""){
/alert("null");/
document.getElementById("eventedate").style.border="2px solid #bac958";
document.getElementById("endp1error").style.display="none";
document.getElementById("endp1success").style.display="";

}

                      try{
                      var startTime = new Date(document.getElementById("eventsdate").value);
                      var endTime = new Date(document.getElementById("eventedate").value);
                      if( startTime > endTime){
                             document.getElementById("eventedate").style.border="2px solid #d43535";
            document.getElementById("endp1error").style.display="";
            document.getElementById("endp1success").style.display="none";
                            }
                      }catch(e){alert(e);}

}
<!---------------------eventenddateonkeyup validation-------------------------------->
function eventedkeyupvalid(){


document.getElementById("eventedate").style.border="1px solid #e3e3e3";
document.getElementById("endp1error").style.display="none";
document.getElementById("endp1success").style.display="none";
}
<!---------------------eventloconblur validation-------------------------------->
function eventlocblurvalid(){

if (document.getElementById("eventlocation").value== ""){
/alert("null");/
document.getElementById("eventlocation").style.border="2px solid #d43535";
document.getElementById("endlocerror").style.display="";
document.getElementById("enlocsuccess").style.display="none";

}
if (document.getElementById("eventlocation").value!= ""){
/alert("null");/
document.getElementById("eventlocation").style.border="2px solid #bac958";
document.getElementById("endlocerror").style.display="none";
document.getElementById("enlocsuccess").style.display="";

}

}
<!---------------------eventloconkeyup validation-------------------------------->

function eventlockeyupvalid(){


document.getElementById("eventlocation").style.border="1px solid #e3e3e3";
document.getElementById("endlocerror").style.display="none";
document.getElementById("enlocsuccess").style.display="none";
}


</script>
  <script>
     Visualforce.remoting.timeout = 120000; // Set timeout at page level
  function eventvalid(step2){
      /*alert(" validation1");*/
       if (document.getElementById("eventname").value== ""){
           /*alert("null");*/
           document.getElementById("eventname").style.border="2px solid #d43535";
             document.getElementById("enerror").style.display="";
                document.getElementById("ensuccess").style.display="none";
    
           }
           
           
            if (document.getElementById("eventsdate").value=="__/__/____ __:__"){
          /* alert("null1");*/
           document.getElementById("eventsdate").style.border="2px solid #d43535";
            document.getElementById("endperror").style.display="";
            document.getElementById("endpsuccess").style.display="none";
           }
          
             if (document.getElementById("eventedate").value== "__/__/____ __:__"){
           /*alert("null2");*/
           document.getElementById("eventedate").style.border="2px solid #d43535";
            document.getElementById("endp1error").style.display="";
            document.getElementById("endp1success").style.display="none";
           }
           
             if (document.getElementById("eventlocation").value ==""){
           /*alert("null3");*/
           document.getElementById("eventlocation").style.border="2px solid #d43535";
            document.getElementById("endlocerror").style.display="";
            document.getElementById("enlocsuccess").style.display="none";
           }
           
           if (document.getElementById("eventname").value !=    ""){
                 document.getElementById("eventname").style.border="1px solid #e3e3e3";
           document.getElementById("ensuccess").style.display="none";
            document.getElementById("enerror").style.display="none";
               
               }
                           if (document.getElementById("eventsdate").value !="__/__/____ __:__"){
                  document.getElementById("endpsuccess").style.display="none";
            document.getElementById("endperror").style.display="none";
           document.getElementById("eventsdate").style.border="1px solid #e3e3e3";
                 }  
                
             if (document.getElementById("eventedate").value !=    "__/__/____ __:__"){
                  document.getElementById("eventedate").style.border="1px solid #e3e3e3";
           document.getElementById("endp1success").style.display="none";
            document.getElementById("endp1error").style.display="none";
                 
                 }
                    
                 
                  if (document.getElementById("eventlocation").value!== ""){
                        document.getElementById("eventlocation").style.border="1px solid #e3e3e3";
            document.getElementById("enlocsuccess").style.display="none";
            document.getElementById("endlocerror").style.display="none";
          
                      
                      }
                      var startTime;
                      var endTime;
                      try{
                      startTime = new Date(document.getElementById("eventsdate").value);
                      endTime = new Date(document.getElementById("eventedate").value);
                      if( startTime > endTime){
                             document.getElementById("eventedate").style.border="2px solid #d43535";
            document.getElementById("endp1error").style.display="";
            document.getElementById("endp1success").style.display="none";
                            }
                      }catch(e){alert(e);}
                     
      
         if (document.getElementById("eventname").value !=  "" && document.getElementById("eventsdate").value !="__/__/____ __:__" && document.getElementById("eventedate").value !=   "__/__/____ __:__"&&document.getElementById("eventlocation").value !=""&&startTime<=endTime){
          /* alert("success");*/
           //saveEvent(step2);
           document.getElementById("eventloader").style.display="";
           saveEventLogo(contents);
           
           }
      }
     
  
  </script>
  
  <!---------- end of event section validation------------------------>
   <!--------------------------------------------------------------------------------------------->
<!-----------------------start of ticket row validation---------------------------------------------------------------------->
<script>
function ticketvalid(){
/* alert ("hhhhhhh");*/
var tickss= document.getElementsByClassName("tickfield");
var ticklen=tickss.length;
var s='';
for (var i=0; i<ticklen; i++){
if (tickss[i].value==""){
/alert("null");/
tickss[i].style.border="2px solid #d43535"
s='error';
}

else if(tickss[i].value!==""){

tickss[i].style.border="1px solid #e3e3e3"

}


}

if(s!='error')
{
/alert("success");/
document.getElementById("ticketloader").style.display="";
document.getElementById("ticketnext").innerHTML="Save";
saveTicket();


}


}


</script>

<!-------------------------------package section validation------------------------------------------------>
<script>

<!----------------pkgname onblur valid---------------------------->
function pkgnmblurvalid(){
if (document.getElementById("packagename").value== ""){
document.getElementById("packagename").style.border="2px solid #d43535";

}
if (document.getElementById("packagename").value!= "")
{
document.getElementById("packagename").style.border="2px solid #bac958";
}
}

<!-----------------------pkgname onKeyup valid----------------------------------------->
function pkgnmkeyupvalid(){
document.getElementById("packagename").style.border="1px solid #e3e3e3";
}

<!--------------------------------------------------------------------------------->

<!----------------pkgprice onblur valid---------------------------->
function pkgpriceblurvalid(){
if (document.getElementById("packageprice").value== ""){
document.getElementById("packageprice").style.border="2px solid #d43535";

}
if (document.getElementById("packageprice").value!= "")
{
document.getElementById("packageprice").style.border="2px solid #bac958";
}
}

<!-----------------------pkgprice onKeyup valid----------------------------------------->
function pkgpricekeyupvalid(){
document.getElementById("packageprice").style.border="1px solid #e3e3e3";
}

<!--------------------------------------------------------------------------------->

<!----------------pkgqty onblur valid---------------------------->
function pkgqtyblurvalid(){
if (document.getElementById("packageqty").value== ""){
document.getElementById("packageqty").style.border="2px solid #d43535";

}
if (document.getElementById("packageqty").value!= "")
{
document.getElementById("packageqty").style.border="2px solid #bac958";
}
}

<!-----------------------pkgqty onKeyup valid----------------------------------------->
function pkgqtykeyupvalid(){
document.getElementById("packageqty").style.border="1px solid #e3e3e3";
}

<!--------------------------------------------------------------------------------->

<!------------on click of package save valid--------------------------------------------------------------------------->
function pkgvalid(){
<!--------------------------------error--------------------------------->
if (document.getElementById("packagename").value==""){
document.getElementById("packagename").style.border="2px solid #d43535";
}

if (document.getElementById("packageprice").value==""){
document.getElementById("packageprice").style.border="2px solid #d43535";
}

if (document.getElementById("packageqty").value==""){

document.getElementById("packageqty").style.border="2px solid #d43535";
}

<!------------------success------------------------>

if (document.getElementById("packagename").value!=""){
document.getElementById("packagename").style.border="1px solid #e3e3e3";
}

if (document.getElementById("packageprice").value!=""){
document.getElementById("packageprice").style.border="1px solid #e3e3e3";
}

if (document.getElementById("packageqty").value!=""){

document.getElementById("packageqty").style.border="1px solid #e3e3e3";
}

<!-------------------------------Pkg line item validation---------------------------------------------->

var pkgitm= document.getElementsByClassName("pkglineitmfield");
var pkgitmlen=pkgitm.length;
var s='';

for (var i=0; i<pkgitmlen; i++){
if (pkgitm[i].value==""){
/alert("null");/
pkgitm[i].style.border="2px solid #d43535"
s='error';
}
else if(pkgitm[i].value!==""){

pkgitm[i].style.border="1px solid #e3e3e3"

}

}

if(s!='error' && document.getElementById("packagename").value != "" && document.getElementById("packageprice").value != "" && document.getElementById("packageqty").value != "" )
{
/alert("success");/
if(pckcontents=='')
{
 savepackageinfo();
 packagelogourl='';
}
else{
savePackageLogo(pckcontents);
document.getElementById("ticketloader").style.display="";}
showclose('package1','dynamictickets');

}


<!------------------------------------------------------------------------------------------------------>

}

</script>
<!------------------------------------------------------------------------------------------------------->
<!-----------------------------------end of ticket row validation------------------------------------------------------------------------------------->
 
  <!--script for event session storage-->
      <script>
      var m;
     
      // get the state of the form
function getEventBasicState() {
  
   var temp = sessionStorage.getItem('event');
    var viewName = $.parseJSON(temp);
    if(temp!=null)
    eventmand=$.parseJSON(temp);
  
      try{
      
   document.getElementById('eventname').value=viewName.EventName ;
   document.getElementById('eventsdate').value=viewName.EventSDate ;
   document.getElementById('eventedate').value=viewName.EventEDate ;
   document.getElementById('eventlocation').value=viewName.EventLocation;
   }catch(e){}
   
   try{
   refreshAF(eventmand.EventID);
   }catch(e){}
  
}

function getEventAllState() {
    
   var temp = sessionStorage.getItem('event');
   var viewName = $.parseJSON(temp);
   if(temp!=null)
    eventmand=$.parseJSON(temp);
    try{
   document.getElementById('eventtitle').value=viewName.EventName ;
   document.getElementById('eventorgemail').value=viewName.EventOrgEmail==undefined?'{!$user.email}':viewName.EventOrgEmail;
   document.getElementById('meventsdate').value=viewName.EventSDate ;
   document.getElementById('meventedate').value=viewName.EventEDate ;
   document.getElementById('meventlocation').value=viewName.EventLocation;
   }catch(e){}
}

var eventmand={};
// save the state of the form
function saveEventBasicState() {
 
  eventmand.EventName = document.getElementById('eventname').value;
  eventmand.EventSDate = document.getElementById('eventsdate').value;
  eventmand.EventEDate = document.getElementById('eventedate').value;
  eventmand.EventLocation = document.getElementById('eventlocation').value;
  
  sessionStorage['event']=JSON.stringify(eventmand);
}


function saveEventAllState() {
  eventmand.EventName = document.getElementById('eventtitle').value;
  eventmand.EventSDate = document.getElementById('meventsdate').value;
  eventmand.EventEDate = document.getElementById('meventedate').value;
  eventmand.EventLocation = document.getElementById('meventlocation').value;
  eventmand.EventOrgEmail=document.getElementById('eventorgemail').value;
  sessionStorage['event']=JSON.stringify(eventmand);
}
var boothleadproduct=[];
var bpindex=0;
// run the above functions when the web page is loaded
window.onload = function () {
noneradio();
//set defaut values for event
var select = document.getElementById('mcountry');
   select.options[1].selected=true;
   getstatejs(select.options[1].value);
   document.getElementById('meventcat').value='';
   
   document.getElementById('eventpage:searchform:searchValue').value='{!$user.companyName}';
   document.getElementById('mhosttime').value='America/New_York';
   document.getElementById('mlangset').value='en_US';
   //document.getElementById('mhosttime').value=new Date().toString().match(/\(([A-Za-z\s].*)\)/)[1];
 //end  
 if(sessionStorage.getItem('blproduct')!=null){
                            var temp = sessionStorage.getItem('blproduct');
                             boothleadproduct= $.parseJSON(temp);
                             bpindex=boothleadproduct.length;
                            }
 if(sessionStorage.getItem('ticket')!=null)
 {
 mask1();
 smoothScroll(document.getElementById('stepss2'));
 }

 
    // check if HTML5 sessionStorage is supported by the browser
    if ('sessionStorage' in window && window['sessionStorage'] !== null) {
        // get the form state
        getEventBasicState();
        // save the state of the form each 15 seconds (customizable)
        m=setInterval('saveEventBasicState()', 1 * 1000);
    }
}

var eventlogourl='';
      </script>
      
      <!--end of script for event session storage-->
      <apex:form >
      <apex:actionfunction name="saveEventLogo" action="{!saveEventLogo}" rerender="reRenderedPanelToSetVariable" oncomplete="saveEvent()">
      <apex:param name="imageData" value="" assignTo="{!imageData}"/>
</apex:actionfunction>
<apex:actionFunction name="refreshAF" action="{!refreshAF}" rerender="theBlock">
<apex:param name="eventids" value="" assignTo="{!eventids}"/>
</apex:actionFunction>
</apex:form>
<apex:outputPanel id="reRenderedPanelToSetVariable">
   <script type="text/javascript">
      eventlogourl = "{!eventlogourl}";
      
   </script>
</apex:outputPanel>
         
         <script>
         
         var contents;
         function checkfile()
         {
            var oFReader = new FileReader();
          var f = document.getElementById("eventlogo").files[0];
          

           if (f) {
      var r = new FileReader();
      r.onload = function(e) { 
      contents = e.target.result.split(',')[1];
      document.getElementById('savedimage').src=e.target.result;
     
      
                 
      }
      r.readAsDataURL(f);
     
    } else { 
      alert("Failed to load file");
    }

         }
         
         function saveEvent()
         {
         
         
           
             var eventmain = sessionStorage.getItem('event');
             var viewName = $.parseJSON(eventmain);
           
           var select = document.getElementById('mcurrset');
           var options = select.options;
           var selected = select.options[select.selectedIndex];
           viewName.CurrencySetting=selected.value;
          
           
           select = document.getElementById('mlangset');
           options = select.options;
           selected = select.options[select.selectedIndex];
           viewName.LanguageSetting=selected.value;
           
           viewName.HostingTimeZone=document.getElementById('mhosttime').value;
           
           try{
           select = document.getElementById('meventcat');
           options = select.options;
           selected = select.options[select.selectedIndex];
           viewName.EventCategory=selected.value;}catch(e){viewName.EventCategory='';}
           
           viewName.OrgName=document.getElementById('eventpage:searchform:searchValue').value;
           
           //select = document.getElementById('meventstat');
           //options = select.options;
           //selected = select.options[select.selectedIndex];
           //viewName.EventStatus=selected.value;
           viewName.EventStatus=document.getElementById('meventstat').value;
           
           viewName.WebUrl=document.getElementById('mweburl').value;
         
         var o_radio_group = document.getElementsByName('mattreg');
         for (var a = 0; a < o_radio_group.length; a++) {
            if (o_radio_group[a].checked) {
                _result = o_radio_group[a].value;
                break;
            }
        }
        viewName.AttendeeReg=_result;
        viewName.PhoneNo=document.getElementById('mphone').value;
        viewName.EventDesc=document.getElementById('meventdesc').value;
        viewName.HostingAddress1=document.getElementById('mhostaddr1').value;
        viewName.HostingAddress2=document.getElementById('mhostaddr2').value;
        viewName.EventCity=document.getElementById('mcity').value;
        try{
        select = document.getElementById('mstate');
           options = select.options;
           selected = select.options[select.selectedIndex];
          viewName.EventState=selected.value;}catch(e){viewName.EventState='';}
           
           select = document.getElementById('mcountry');
           options = select.options;
           selected = select.options[select.selectedIndex];
           viewName.EventCountry=selected.value;
           viewName.ZipCode=document.getElementById('mzipcode').value;
           //viewName.PoBox=document.getElementById('mpobox').value;
           viewName.EventHashTag=document.getElementById('meventhashtag').value;
           viewName.TwitterUrl=document.getElementById('mtwiturl').value;
           viewName.FacebookUrl=document.getElementById('mfacebookurl').value;
           //sessionStorage['event']=JSON.stringify(eventmand);
           
           
           
           console.log(eventmain);
        
       
      
                      
           Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.savesEventInfo}',
            JSON.stringify(viewName),
            eventlogourl,
            function(result, event){
            if (event.status){
             eventmand.EventID=result;  
             sessionStorage['event']=JSON.stringify(eventmand);
             document.getElementById("next1").innerHTML="Save";
             smoothScroll(document.getElementById('stepss2')); 
             mask1();
             document.getElementById("eventloader").style.display="none";
             refreshAF(eventmand.EventID);
              } 
              else if (event.type === 'exception') {
                    alert(event.message + " " + event.where + " ");
                } else {
                    alert(event.message);
                }          
            }, 
            {escape: true}
        );

         }
         
         
         
         function getstatejs(val)
         {
            
             Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.currencyBasedOnCountry}',
            val,
            function(result, event){
            var opt;
            $('#mcurrset').empty();  
           $.each(result, function (i, vals) {
           
             opt = document.createElement('option');
             opt.value = vals.Id;
             opt.innerHTML = vals.Currency_Name__c;
             document.getElementById('mcurrset').add(opt);
             });
                   
            }, 
            {escape: true}
        );
        
        
         Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.statesBasedOnCountry}',
            val,
            function(result, event){
            var opt;
            $('#mstate').empty(); 
            opt = document.createElement('option');
             opt.value = '';
             opt.innerHTML = '';
             document.getElementById('mstate').add(opt); 
           $.each(result, function (i, vals) {
          
             opt = document.createElement('option');
             opt.value = vals.Id;
             opt.innerHTML = vals.Long_Name__c;
             document.getElementById('mstate').add(opt);
             });
                   
            }, 
            {escape: true}
        );
        
        
           
         }
         </script>

<!-------css for dynamic table-------------------->

          <style type="text/css">
        .del{ 
background-image:url({!URLFOR($Resource.createevents,'createevents/images/removerow.png')} ); background-repeat:no-repeat; background-position:center; width:30px; height:30px;
          background-color: #DDD; border-radius:3px; cursor:pointer;}
        
         .add{ background-image:url({!URLFOR($Resource.createevents,'createevents/images/addrow.png')} ); background-repeat:no-repeat; background-position:center; width:30px; height:30px;
          background-color:#DDD;border-radius:3px; cursor:pointer; }
       
        #three{width:65.5%;}    
        #one{width:87.5%;}   
    
    .del1{background-image:url({!URLFOR($Resource.createevents,'createevents/images/removerow.png')} ); background-repeat:no-repeat; background-position:center;width:30px; height:30px;
          background-color: #DDD; border-radius:3px; cursor:pointer;}
        
         .add1{ background-image:url({!URLFOR($Resource.createevents,'createevents/images/addrow.png')} ); background-repeat:no-repeat; background-position:center; width:30px; height:30px;
          background-color:#DDD;border-radius:3px; cursor:pointer; }
          
          .del2{background-image:url({!URLFOR($Resource.createevents,'createevents/images/removerow.png')} ); background-repeat:no-repeat; background-position:center; width:30px; height:30px;
          background-color: #DDD; border-radius:3px; cursor:pointer;}
        
         .add2{background-image:url({!URLFOR($Resource.createevents,'createevents/images/addrow.png')} ); background-repeat:no-repeat; background-position:center; width:30px; height:30px;
          background-color:#DDD;border-radius:3px; cursor:pointer; }
          

        .del3{background-image:url({!URLFOR($Resource.createevents,'createevents/images/removerow.png')} ); background-repeat:no-repeat; background-position:center; width:30px; height:30px;
          background-color: #DDD; border-radius:3px; cursor:pointer;}
        
         .add3{ background-image:url({!URLFOR($Resource.createevents,'createevents/images/addrow.png')} ); background-repeat:no-repeat; background-position:center; width:30px; height:30px;
          background-color:#DDD;border-radius:3px; cursor:pointer; }
    
        </style>
<!--manage tags---------------->
<!--<script type="text/javascript" src="tagsjs/jquery-1.7.2.min.js"></script>-->

<!-------------------------------------------------------->

 <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/jquery-1.9.1.js')}"></script>  
 <!--<script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/funcoes.js')}"></script>-->
 <script>
 $(function(){


    function Editar(){
    
        var par = $(this).parent().parent(); //tr
        var tdNome = par.children("td:nth-child(1)");
   
        var tdBotoes = par.children("td:nth-child(2)");

        tdNome.html("<input type='text' id='txtNome' value='"+tdNome.html()+"'/>");

        tdBotoes.html("<img src={!URLFOR($Resource.createevents,'createevents/images/disk.png')} class='btnSalvar'/>");

        $(".btnSalvar").bind("click", Salvar);
        $(".btnEditar").bind("click", Editar);
        $(".btnExcluir").bind("click", Excluir);
    };

    function Salvar(){
        var par = $(this).parent().parent(); //tr
        var tdNome = par.children("td:nth-child(1)");
       
        var tdBotoes = par.children("td:nth-child(2)");

        tdNome.html(tdNome.children("input[type=text]").val());
    
        tdBotoes.html("<img src={!URLFOR($Resource.createevents,'createevents/images/delete1.png')} class='btnExcluir' style='margin-right:20%;'/><img src={!URLFOR($Resource.createevents,'createevents/images/pencil.png')} class='btnEditar'/>");

        $(".btnEditar").bind("click", Editar);
        $(".btnExcluir").bind("click", Excluir);
    };

    function Excluir(){
        var par = $(this).parent().parent(); //tr
        par.remove();
    };

     $(".btnEditar").bind("click", Editar);
    $(".btnExcluir").bind("click", Excluir);
    $("#btnAdicionar").bind("click", Adicionar);           

});
 </script>
 <!--script for datetimepicker-->


    <!-------------------------------------->
    
    <!-------------------Sticky Nav js &css--------------->


<style type="text/css">

.fixedtop {
    position:fixed;
    top:0px;
    background-image:url(images/background-header.png);
    
    margin:0px auto;
    width: 93%;
    z-index:90;
    
}
</style>
    <!----script for on click of save ------------------------->
           <script type='text/javascript'>//<![CDATA[ 

window.smoothScroll = function(target) {
    var scrollContainer = target;
    do { //find scroll container
        scrollContainer = scrollContainer.parentNode;
        if (!scrollContainer) return;
        scrollContainer.scrollTop += 1;
    } while (scrollContainer.scrollTop == 0);
    
    var targetY = 0;
    do { //find the top of target relatively to the container
        if (target == scrollContainer) break;
        targetY += target.offsetTop;
    } while (target = target.offsetParent);
    
    scroll = function(c, a, b, i) {
        i++; if (i > 24) return;
        c.scrollTop = a + (b - a) / 30 * i;
        
        setTimeout(function(){ scroll(c, a, b, i); }, 50);
    }
    // start scrolling
    scroll(scrollContainer, scrollContainer.scrollTop, targetY,0);
}
  
var ticketlist=[{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""},{tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""}];
   function getTicketState()
   {
        if(sessionStorage['ticket']!=null){
   
   var temp = sessionStorage.getItem('ticket');
    console.log('temp '+temp);
   
    ticketlist= $.parseJSON(temp);
   
   
   
    var appendTxt='';
    var apvar=0;
    for(var p=0;p<ticketlist.length;p++)
    {
        
       if(ticketlist[p].trowid!=''){
      appendTxt += "<tr><td><input type='text' id='one' class='tickfield' name='input_box_one[]' value='"+ticketlist[p].tname+"'></td> <td><SELECT class=' selectlist ' NAME=\"Animal\" id='ppptype"+apvar+"'><apex:repeat value="{!paymentSelectOptions}" var="paytype"><option value='{!paytype.value}'>{!paytype.label}</option></apex:repeat></SELECT><script>document.getElementById('ppptype"+apvar+"').value='"+ticketlist[p].tpaytype+"';<\/script></td></td><td><input type='text' class='tickfield' name='input_box_two[]' value='"+ticketlist[p].tqty+"'/></td><td><input type='text' class='tickfield' id='three' name='input_box_three[]' value='"+ticketlist[p].tprice+"'/></td><td style='text-align:center;'><a style='cursor:pointer'  onClick=Alert3.render(this.parentNode.parentNode.rowIndex,this.parentNode.parentNode.children[0].children[0].value,this.parentNode.parentNode.children[1].children[0].value,this.parentNode.parentNode.children[2].children[0].value,this.parentNode.parentNode.children[3].children[0].value)><div id='nwmoreinfodiv' style='margin-right:32%;'><img src={!URLFOR($Resource.createevents,'createevents/images/addmore.png')} width='25px' height='25px'/></div></a></td> <td><input type='button' class='del' value='' /></td></tr>";  
        //alert(ticketlist[p].ticketcount);
         apvar=apvar+1;
      }
    }
    
     $(".dynamic").find("tr:gt(0)").remove();
      $(".dynamic tbody").append(appendTxt); 
    }
     m=setInterval('saveTicketSate()', 1 * 1000);
   }
   function saveTicketSate()
   {
 
   
   
         //create session for tickets
        var table = document.getElementById("tickettable");
             for (var i = 1, row,arrindex=0; row = table.rows[i]; i++) {
              if(row.style.display!='none'){
             col = row.cells[0];
             ticketlist[arrindex].tname=col.children[0].value;
             //for showing package information 
               if(ticketlist[arrindex].ispackage=="true"){
             var cacheDiv = document.createElement('div');
             for(var sub=0,inntext='';sub<ticketlist[arrindex].subpackagegroup.length;sub++)
             inntext=inntext+'['+ticketlist[arrindex].subpackagegroup[sub].pkgitemname+' : '+ticketlist[arrindex].subpackagegroup[sub].pkgitemqty+'] ';
               cacheDiv.innerHTML = inntext;
               try{
               col.children[1].innerHTML=inntext;
               }catch(e){col.appendChild(cacheDiv);}
               }
               
             
             col = row.cells[1];
             ticketlist[arrindex].tpaytype=col.children[0].value;
             col = row.cells[2];
             ticketlist[arrindex].tqty=col.children[0].value;
             col = row.cells[3];
               
             //for showing help text for donation
               var cacheImage = document.createElement('img');
               cacheImage.src = '/s.gif';
               cacheImage.className= 'helpIcon';
               ;
               if(ticketlist[arrindex].tpaytype=='Donation'){
               col.children[0].style.width="60%";
               if(col.children[0].value=="")
               col.children[0].value="0";
               cacheImage.alt='Enter Minimum Donation Amount';
               cacheImage.title='Enter Minimum Donation Amount';
               try{
               console.log(col.children[1].value);
               }catch(e){col.appendChild(cacheImage);}
               }
               else if(ticketlist[arrindex].tpaytype=='Paid' && Number(col.children[0].value)==0)
               {
                  col.children[0].value="";
                  col.children[0].style.width="60%";
                  cacheImage.alt='Price cannot be left blank or 0 for Paid Ticket';
               cacheImage.title='Price cannot be left blank or 0 for Paid Ticket';
                   try{
               console.log(col.children[1].value);
               }catch(e){col.appendChild(cacheImage);}
               }
               else
               {
                   try{
                        col.removeChild(col.children[1]);
                        }catch(e){}
               }
               
              
              
             
             ticketlist[arrindex].tprice=col.children[0].value;
             if(ticketlist[arrindex].tpaytype=='Free'){
             col.children[0].value=0;
             col.children[0].disabled="disabled";
             }
             else
             col.children[0].disabled=false;
             ticketlist[arrindex].trowid=col.parentNode.rowIndex;
             if(ticketlist[arrindex].grouptickets.length==1){
             ticketlist[arrindex].grouptickets[0].tname=ticketlist[arrindex].tname;
             ticketlist[arrindex].grouptickets[0].qty=ticketlist[arrindex].tqty;
             ticketlist[arrindex].grouptickets[0].tprice=ticketlist[arrindex].tprice;
             
             }
             if(ticketlist[arrindex].grouptickets.length==0){
             ticketlist[arrindex].tvisib=true;
             if(ticketlist[arrindex].ispackage=="true")
             ticketlist[arrindex].itemtype=$("#pkitemtype option:first").val();
             else{
             if(ticketlist[arrindex].itemtype=='')
             ticketlist[arrindex].itemtype=$("#itemtype option:first").val();
             }
             
             }
             for(var sub=0;sub<ticketlist[arrindex].grouptickets.length;sub++){
             if(Number(ticketlist[arrindex].grouptickets[sub].maxqty)>Number(ticketlist[arrindex].grouptickets[sub].qty))
                        ticketlist[arrindex].grouptickets[sub].maxqty=String(ticketlist[arrindex].grouptickets[sub].qty);
                 }
             
             
             arrindex++;
             
             
             }
             
             }
             
            console.log(ticketlist);
             sessionStorage['ticket']=JSON.stringify(ticketlist);
           
       
   }
   
   
   
   
   function saveTicket()
   {
   var paidflag=0;
   for(tkind=0;tkind<ticketlist.length;tkind++)
   {
        
       if(ticketlist[tkind].tpaytype=="Paid"){
       paidflag=1;
       break;
       }
   }
   
   if(paidflag==1)
   {
       
        if(document.querySelector('input[name="pgopt"]:checked').value=='None'&&document.getElementById('check1').checked==false){
        alert('Please Choose a Payment Gateway/Select Cheque Option  For Paid Tickets');
        document.getElementById("ticketloader").style.display="none";
        return;}
   }
  
   Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.deleteTicketInfo}',
             eventmand.EventID,
             function(result, event){
             if (event.status){
    Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.savesTicketInfo}',
            JSON.stringify(ticketlist),
            eventmand.EventID,
            eventmand.EventEDate,
            function(result, event){
            if (event.status){
            //sucess code
            smoothScroll(document.getElementById('stepss3')); 
             mask2();
            document.getElementById("ticketloader").style.display="none";
             } 
             else if (event.type === 'exception') {
                    alert(event.message + " " + event.where + " ");
                } else {
                    alert(event.message);
                }          
            }, 
            {escape: true}
        );
        
        }
        }, 
            {escape: true}
        );
        
        
        var paygateway={};
        
        paygateway.pgopt=document.querySelector('input[name="pgopt"]:checked').value;
        
        if(paygateway.pgopt=="Stripe")
        {
           paygateway.firstparam=document.getElementById('spkey').value;
           paygateway.secondparam='';
        }
        else if(paygateway.pgopt=="PayPal")
        {
           paygateway.firstparam=document.getElementById('ppemailaddr').value;
           paygateway.secondparam='';
        }
        else if(paygateway.pgopt=="Authorize.Net")
        {
           paygateway.firstparam=document.getElementById('authid').value;
           paygateway.secondparam=document.getElementById('authkey').value;
        }
        
        if(document.getElementById('check1').checked)
        {
            
            Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.createCompanyExtDetails}',
            document.getElementById('eventpage:searchform:searchValue').value,
            companyextid,
            document.getElementById('chqaddr1').value,
            document.getElementById('chqaddr2').value,
            document.getElementById('chqcity').value,
            document.getElementById('chqcountry').value,
            document.getElementById('chqstate').value,
            document.getElementById('chqZip').value,
            function(result, event){
            if (event.status){
            companyextid=result;
            }
            }
            );
        }
        
        
        console.log(paygateway);
         Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.savesPaymentOption}',
            JSON.stringify(paygateway),
            eventmand.EventID,
            document.getElementById('eventpage:searchform:searchValue').value,
            document.getElementById('check1').checked,
            document.querySelector('input[name="tckopt"]:checked').value,
            document.querySelector('input[name="feeopt"]:checked').value,
            function(result, event){
            if (event.status){
            
             } 
             else if (event.type === 'exception') {
                    alert(event.message + " " + event.where + " ");
                } else {
                    alert(event.message);
                }          
            }, 
            {escape: true}
        );
        
        }

</script>





<!------------END OF sticky js and css-------------->

  <!-----------script for highlight label on sticky header-->
      <script>
       function highlight(chgs,chgs1,chgs2,chgs3)
       {   
     document.getElementById(chgs).style.color="#19c3fa";
     document.getElementById(chgs).style.fontweight="bold";
     document.getElementById(chgs1).style.color="#fff";
     document.getElementById(chgs2).style.color="#fff";
     document.getElementById(chgs3).style.color="#fff";

    }
    
    function mask1(){
        
        document.getElementById("mask2overlay").style.display="none";       
        
         //start timer for tickets
        getTicketState();
        }
        
            
    function mask2(){
        
        document.getElementById("mask3overlay").style.display="none";       }
        
        function mask3(){
        
        document.getElementById("mask4overlay").style.display="none";       }
        
      </script>
      
      <!------------------------------------------------------> 



<!------------------popups code------------------------------->
                 <style>
                   #dialogoverlay{
    display:none;
    /*opacity: .8;*/
position: fixed;
top: 0px;
left: 0px;
background-color: #484848;
width: 100%;
z-index: 999999999999;
height: 100%;

    
    }
 #dialogoverlay2{
    display:none;
    opacity: .8;
position: fixed;
top: 0px;
left: 0px;
background-color: #484848;
width: 100%;
z-index:99;
height: 100%;
    
    }
#dialogbox{ display:none; position:fixed;padding:5px;;
 width:40%; margin-left:29%; z-index:99999999999; height:530px; padding-bottom:30px;  overflow:auto; border-radius:3px;
  -webkit-border-radius: 3px;-moz-border-radius: 3px;}
  
  #dialogbox3{ display:none; position:fixed;padding:5px;;
 width:90%; margin-left:4.8%; z-index:100; height:630px; padding-bottom:30px;  overflow:auto; border-radius:3px;
  -webkit-border-radius: 3px;-moz-border-radius: 3px;}
  
    #dialogbox4{ display:none; position:fixed;padding:5px;;
 width:90%; margin-left:4.8%; z-index:100; height:630px; padding-bottom:30px;  overflow:auto; border-radius:3px;
  -webkit-border-radius: 3px;-moz-border-radius: 3px;}
  
   #dialogbox5{ display:none; position:fixed;padding:5px;;
 width:90%; margin-left:4.8%; z-index:100;padding-bottom:30px;  overflow:auto; border-radius:3px;
  -webkit-border-radius: 3px;-moz-border-radius: 3px;}
 
  #dialogbox2{ display:none; position:fixed;padding:5px;
 width:20%; margin-left:40%; z-index:100; height:630px; padding-bottom:30px;  overflow:auto; border-radius:3px;
  -webkit-border-radius: 3px;-moz-border-radius: 3px;}
   
 #close{font-size: 25px;
font-weight: bold;
color: #fff;
text-decoration: none;
float: right;
margin-right: .2%;
margin-top:-9px;
cursor:pointer;}

#close:hover{font-size: 25px;
text-decoration: underline;
font-weight: bold;
color: #fff;
float: right;
margin-right: .2%;
margin-top:-9px; cursor:pointer;} 

#managetagpopup tr td{
    height: 27px;
border-bottom: 1px solid #e3e3e3;
border-right: 1px solid #e3e3e3;
padding-left: 10px;
color: #807f7f;
    
    }

</style>
<!--popup script for manage tags-->
<script type="text/javascript">
function getKeyByValue(object,value ) {
    for( var prop in object) {
        if( object.hasOwnProperty( prop ) ) {
             if( object[ prop ] === value )
                 return prop;
        }
    }
}

function CustomAlert(){
    this.render =function(dialog){
    
    //code for adding existing event tags
   
   
                    var appendTxt = '';
                    
                    for(var key in TagMap) {

                    appendTxt+='<tr><td width="85%">'+TagMap[key]+'</td><td><img src=" {!URLFOR($Resource.createevents,'createevents/images/delete1.png')}" class="btnExcluir" style="margin-right:20%;"/><img src="{!URLFOR($Resource.createevents,'createevents/images/pencil.png')}" width="20" height="20" class="btnEditar"/></td></tr>';
                    }
                     
                      $("#managetagpopup").find("tr:gt(0)").remove();
                     $("#managetagpopup tbody").append(appendTxt);
                      $(function(){
     var oldtagtext=''
      
    function Editar(){
    
        var par = $(this).parent().parent(); //tr
        var tdNome = par.children("td:nth-child(1)");
        oldtagtext=tdNome.html();
   
        var tdBotoes = par.children("td:nth-child(2)");

        tdNome.html("<input type='text' id='txtNome' value='"+tdNome.html()+"'/>");
       

        tdBotoes.html("<img src={!URLFOR($Resource.createevents,'createevents/images/disk.png')} class='btnSalvar'/>");

        $(".btnSalvar").unbind("click").bind("click", Salvar);
        //$(".btnEditar").bind("click", Editar);
        //$(".btnExcluir").bind("click", Excluir);
        
    };

    function Salvar(){
  
        var par = $(this).parent().parent(); //tr
        var tdNome = par.children("td:nth-child(1)");
        
        var tdBotoes = par.children("td:nth-child(2)");

        tdNome.html(tdNome.children("input[type=text]").val());
       
        Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.updateEventTag}',
            eventmand.EventID,
            oldtagtext,
            tdNome.html(),
           function(result, event){
           if (event.status){
           TagMap[result]=tdNome.html();
           console.log(TagMap);
           }}
           );
    
        tdBotoes.html("<img src={!URLFOR($Resource.createevents,'createevents/images/delete1.png')} class='btnExcluir' style='margin-right:20%;'/><img src={!URLFOR($Resource.createevents,'createevents/images/pencil.png')} class='btnEditar'/>");

        $(".btnEditar").unbind("click").bind("click", Editar);
        //$(".btnEditar").bind("click", Editar);
        //$(".btnExcluir").bind("click", Excluir);
         $(".btnExcluir").unbind("click").bind("click", Excluir);
    };

    function Excluir(){
        var par = $(this).parent().parent(); //tr
         var tdNome = par.children("td:nth-child(1)");
         var keys=getKeyByValue(TagMap,tdNome.html());
           
           delete TagMap[keys];
          Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.deleteEventTag}',
            eventmand.EventID,
            tdNome.html(),
           function(result, event){
           if (event.status){
           
           console.log(TagMap);
           }}
           );
        par.remove();
    };

     $(".btnEditar").bind("click", Editar);
    $(".btnExcluir").bind("click", Excluir);
    //$("#btnAdicionar").bind("click", Adicionar);           

});
           
          
    
    //
    
    
        var winW = window.innerWidth;
        var winH = window.innerHeight;
        var dialogoverlay =document.getElementById('dialogoverlay');
        var dialogbox = document.getElementById('dialogbox');
        dialogoverlay.style.display="block";
        /*dialogoverlay.style.height = winH +"px";
        dialogbox.style.left=(winW/2) -(905*.5)+"px";*/
        dialogbox.style.top="80px";
        dialogbox.style.display="block";
        
    }
    this.Cancel = function(){
        document.getElementById('dialogbox').style.display ="none";
                document.getElementById('dialogoverlay').style.display ="none";
          //get saved tags
          
                    var appendTxt = '';
                     $('.results').remove(); 
                     $('.resultspk').remove(); 
                   for(var key in TagMap) {
                    $('#abc').append('<table class="results">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+TagMap[key]+'</td>'
                            
                           +'</tr>'
                       + '</table>');
                       
                    $('#abcpk').append('<table class="resultspk">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+TagMap[key]+'</td>'
                            
                           +'</tr>'
                       + '</table>'); 
                       
                     }
                     $('#addtextlabel').val(''); //clearing textbox value
                     $('#addtextlabelpk').val(''); //clearing textbox value
                     
                
                return false;
        
        }
    
    }
    
    var Alert = new CustomAlert(); 

</script>
<!-----------------------popupscript for event more info-------------------------------->
<script type="text/javascript">
function CustomAlert(){
    this.render =function(dialog){
    
    clearTimeout(m);
if ('sessionStorage' in window && window['sessionStorage'] !== null) {
        // get the form state
        getEventAllState();
        // save the state of the form each 15 seconds (customizable)
        t=setInterval('saveEventAllState()', 1 * 1000);
    }

    
        var winW = window.innerWidth;
        var winH = window.innerHeight;
        var dialogoverlay =document.getElementById('dialogoverlay2');
        var dialogbox = document.getElementById('dialogbox5');
        dialogoverlay.style.display="block";
        dialogoverlay.style.height = winH +"px";
        //dialogbox.style.left=(winW/2) -(1290*.5)+"px";
        dialogbox.style.top="10px";
        dialogbox.style.display="block";
        
    }
    this.Cancel = function(){
        document.getElementById('dialogbox5').style.display ="none";
                document.getElementById('dialogoverlay2').style.display ="none";
            
                //remove the popup box timeout,
clearTimeout(t);
getEventBasicState();
 m=setInterval('saveEventBasicState()', 1 * 1000);
 
                return false;
        
        }
    
    }
    
    var Alert5 = new CustomAlert();  
Date.prototype.today = function () { 
    return (((this.getMonth()+1) < 10)?"0":"")+(this.getMonth()+1)+"/"  + ((this.getDate() < 10)?"0":"") + this.getDate() +"/"+ this.getFullYear();
} 
  Date.prototype.timeNow = function(){    return ((this.getHours() < 10&&this.getHours()!=0)?"0":"") + ((this.getHours()==0)?"12":(this.getHours()>12)?(this.getHours()-12):this.getHours()) +":"+ ((this.getMinutes() < 10)?"0":"") + this.getMinutes() +" "+ ((this.getHours()>=12)?('PM'):'AM'); };
  
</script>
<!------------------------------------------------------------------------------------->
<!-----------------------popupscript for ticket moreinfo-------------------------------->

<script type="text/javascript">
var parentrowindex;
 var flag;
 var earlybudname,earlybudqty,earlybudprice;
 var isnewpackage;
 
function CustomAlert(){
    this.render =function(rowindex,tname,tpaytype,tqty,tprice){
    parentrowindex=rowindex;
    
    for(var i=0;i<ticketlist.length;i++)
    {
       if(ticketlist[i].trowid==parentrowindex)
       {
          if(ticketlist[i].ispackage=="true"){
          renderpackage(i,tname,tqty,tprice);
          
          }
          else
          renderticket(i,tname,tpaytype,tqty,tprice);
       }
    }      
    
  }  
    
  
    this.Cancel = function(){
        document.getElementById('dialogbox3').style.display ="none";
                document.getElementById('dialogoverlay2').style.display ="none";
            
                
                return false;
        
        }
    
    }
    
    var Alert3 = new CustomAlert(); 
    function renderpackage(i,tname,tqty,tprice)
    {
    
    flag=-1;
   
       showpackage('package1','dynamictickets','false');
       document.getElementById('packagename').value=tname;
       document.getElementById('pminfoname').value=tname;
       document.getElementById('packageqty').value=tqty;
       document.getElementById('packageprice').value=tprice;
       var appendTxt='';
       try{
       $('#pkvisib').attr('checked',ticketlist[i].tvisib);
document.getElementById('pkdesc').value=ticketlist[i].tdesc;
$('input[name="pkgpayradio"][value="' + ticketlist[i].tpaytype+ '"]').attr("checked",true);}catch(e){}

       for(var j=0;j<ticketlist[i].ticketcount;j++)
           {
             
          appendTxt += "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+escape(ticketlist[i].grouptickets[j].tname)+"'/></td> <td><input type='text' style='width:75%' class='datetimepickers' value='"+ticketlist[i].grouptickets[j].sdate+"'/></td><td><input type='text' style='width:75%' class='datetimepickers'  value='"+ticketlist[i].grouptickets[j].edate+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[i].grouptickets[j].qty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[i].grouptickets[j].minqty+"'/></td><td><input type='text' id='three' name='input_box_three[]'  value='"+ticketlist[i].grouptickets[j].maxqty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[i].grouptickets[j].tprice+"'/></td></tr>";
          flag=0;
          document.getElementById('savedpackageimage').src="/servlet/servlet.FileDownload?file="+ticketlist[i].tcketlogo;
           }
      $(".dynamic4").find("tr:gt(0)").remove();
      $(".dynamic4 tbody").append(appendTxt);
        flag=ticketlist[i].ticketcount-1; 
        
        var pmtable = document.getElementById("packagemoreinfotable");
       for (var k = 1,row; row = pmtable.rows[k]; k++) {
       row.cells[0].children[0].value=unescape(row.cells[0].children[0].value);
       if(document.querySelector('input[name="pkgpayradio"]:checked').value=='Free'){
       row.cells[6].children[0].value=0;
       row.cells[6].children[0].disabled="disabled";
       }
       else{
       row.cells[6].children[0].disabled=false;
       }
       }
        
        appendTxt='';
       
        for(var j=0;j<ticketlist[i].subpackagegroup.length;j++)
           {
        
           appendTxt += "<tr><td><input type='text' id='one' class='pkglineitmfield' name='input_box_one[]' value='"+escape(ticketlist[i].subpackagegroup[j].pkgitemname)+"'/></td> <td><input type='text' class='pkglineitmfield' id='three' name='input_box_three[]' value='"+ticketlist[i].subpackagegroup[j].pkgitemqty+"'/></td><td><select class='selectlist' onchange='checkbadgelabeledit(this);' style='outline:none;' id='ttypeindex"+j+"' ><apex:repeat value="{!itemtypesaddon}" var="ittype"><option value={!ittype.value}>{!ittype.label}</option></apex:repeat></select></td><td><input type='text' id='one'   name='input_box_one[]' style='width: 85%;' value='"+ticketlist[i].subpackagegroup[j].badgelabel+"'/></td><td><input type='button' class='del1' value='' /></td></tr>";             
            
           }
           $(".dynamic2").find("tr:gt(0)").remove();
      $(".dynamic2 tbody").append(appendTxt);
      
      showttype(i);
      
      var ptable = document.getElementById("packagetable");
       for (var l = 1,row; row = ptable.rows[l]; l++) {
       row.cells[0].children[0].value=unescape(row.cells[0].children[0].value);
       
       if(row.cells[2].children[0].options[row.cells[2].children[0].selectedIndex].text!='Staff Admission'&&row.cells[2].children[0].options[row.cells[2].children[0].selectedIndex].text!='Admissions'&&row.cells[2].children[0].options[row.cells[2].children[0].selectedIndex].text!='Seats'&&row.cells[2].children[0].options[row.cells[2].children[0].selectedIndex].text!='Seminars'&&row.cells[2].children[0].options[row.cells[2].children[0].selectedIndex].text!='MatchLeads Buyer'&&row.cells[2].children[0].options[row.cells[2].children[0].selectedIndex].text!='MatchLeads Seller')
{
row.cells[3].children[0].value="";
row.cells[3].children[0].disabled="disabled";
}
else
row.cells[3].children[0].disabled=false;
       }
       
    }
    function showttype(i)
    {
        
          
        for(var j=0;j<ticketlist[i].subpackagegroup.length;j++)
           { 
              document.getElementById('ttypeindex'+j).value=ticketlist[i].subpackagegroup[j].ttype;
           }
             
    }
    
   function renderticket(i,tname,tpaytype,tqty,tprice)
   {
  
    //LOGIC FOR RENDERING TICKETS FROM TICKETLIST
    earlybudname=tname;
   earlybudqty=tqty;
    earlybudprice=tprice;
    
    var appendTxt='';
    flag=-1;
     //clear all checkbox in tags
      var testimonialElements = $(".results");
      for(var l=0; l<testimonialElements.length; l++){
                            
                                  var element = testimonialElements.eq(l);
                                  element[0].children[0].children[0].children[0].children[0].checked=false;
                                  }
   
          
           for(var j=0;j<ticketlist[i].ticketcount;j++)
           {
               
             appendTxt =appendTxt + "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+escape(ticketlist[i].grouptickets[j].tname)+"'/></td><td>  <input type='text' style='width:75%' class='datetimepickers' value='"+ticketlist[i].grouptickets[j].sdate+"'/></td><td><input type='text' style='width:75%' class='datetimepickers' value='"+ticketlist[i].grouptickets[j].edate+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[i].grouptickets[j].qty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[i].grouptickets[j].minqty+"' /></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[i].grouptickets[j].maxqty+"' /></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[i].grouptickets[j].tprice+"' /></td><td id='regticket' style='display:none;'><input type='button' class='del2' title='Delete Ticket' value='' /></td></tr>";
             document.getElementById('savedticketimage').src="/servlet/servlet.FileDownload?file="+ticketlist[i].tcketlogo;
           }
      $(".dynamic3").find("tr:gt(0)").remove();
      $(".dynamic3 tbody").append(appendTxt);
        flag=ticketlist[i].ticketcount-1; 
        
        
        
        
        
        //prepopulate tags
        
        
        for(var k=0;k<ticketlist[i].tags.length;k++)
           {
               var testimonialElements = $(".results");
                             for(var l=0; l<testimonialElements.length; l++){
                            
                                  var element = testimonialElements.eq(l);
                                  
                                  if(TagMap[ticketlist[i].tags[k].tagname]==element[0].children[0].children[0].children[1].innerHTML)
                                  element[0].children[0].children[0].children[0].children[0].checked=true;
                                  
                                  }
             
           }
        //end of prepopulate tags
        
     
   
    if(flag==-1){
    document.getElementById('savedticketimage').src='';
   var datetime =new Date().today()+" " + new Date().timeNow();
    appendTxt = "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+escape(tname)+"'/></td><td>  <input type='text' class='datetimepickers' style='width:75%' value='"+datetime+"'/></td><td><input type='text' style='width:75%' class='datetimepickers' value='"+document.getElementById('eventedate').value+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+tqty+"' /></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}' /></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultmaxqty}' /></td><td><input type='text' id='three' name='input_box_three[]' value='"+tprice+"' /></td><td id='regticket' style='display:none;'><input type='button' class='del2' title='Delete Ticket' value='' /></td></tr>";
      $(".dynamic3").find("tr:gt(0)").remove();
      $(".dynamic3 tbody").append(appendTxt);

      }
     //special character checking
      var tmtable = document.getElementById("mytab1");
       for (var p = 1,row; row = tmtable.rows[p]; p++) {
       row.cells[0].children[0].value=unescape(row.cells[0].children[0].value);
       if(tpaytype=='Free'){
       row.cells[6].children[0].value=0;
       row.cells[6].children[0].disabled="disabled";
       }
       else
       {
       row.cells[6].children[0].disabled=false;
       }
       
       }
       
      $('input[name="payradio"][value="' + tpaytype+ '"]').attr("checked",true);
      document.getElementById('tminfoname').value=tname;
     document.getElementById('tdesc').value=ticketlist[i].tdesc;
       document.getElementById('tbdglabel').value=ticketlist[i].tbdglabel;
       $('#tvisib').attr('checked',ticketlist[i].tvisib);
       document.getElementById('itemtype').value=ticketlist[i].itemtype;
       editticketbadgelabel(document.getElementById('itemtype'));
      
       //END OF LOGIC FOR RENDERING TICKETS FROM TICKETLIST
        var winW = window.innerWidth;
        var winH = window.innerHeight;
        var dialogoverlay =document.getElementById('dialogoverlay2');
        var dialogbox = document.getElementById('dialogbox3');
        dialogoverlay.style.display="block";
        /*dialogoverlay.style.height = winH +"px";
        dialogbox.style.left=(winW/2) -(905*.5)+"px";*/
        dialogbox.style.top="10px";
        dialogbox.style.display="block";
        
    } 
    

   
   

</script>
<!------------------------------------------------------------------------------------->


<!-----------------------popupscript for package moreinfo -------------------------------->
<script type="text/javascript">
var mrclick;
function CustomAlert(){
    this.render =function(pname,pprice,pqty){
       earlybudname=pname;
       earlybudqty=pqty;
       earlybudprice=pprice;
      if(flag==-1)
      {
        if(mrclick==0){
        var datetime =new Date().today()+" " + new Date().timeNow();
     var appendTxt= "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+escape(pname)+"'/></td> <td><input type='text' style='width:75%' class='datetimepickers' value='"+datetime+"'/></td><td><input type='text' style='width:75%' class='datetimepickers'  value='"+document.getElementById('eventedate').value+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+pqty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+pprice+"'/></td></tr>";
      $(".dynamic4").find("tr:gt(0)").remove();
      $(".dynamic4 tbody").append(appendTxt);
      mrclick++;
      //special character
       var pmtable = document.getElementById("packagemoreinfotable");
       for (var i = 1,row; row = pmtable.rows[i]; i++) {
       row.cells[0].children[0].value=unescape(row.cells[0].children[0].value);
       if(document.querySelector('input[name="pkgpayradio"]:checked').value=='Free'){
       row.cells[6].children[0].value=0;
       row.cells[6].children[0].disabled="disabled";
       }
       else{
       row.cells[6].children[0].disabled=false;
       }
       }
      }
      document.getElementById('pminfoname').value=pname;
      }
        var winW = window.innerWidth;
        var winH = window.innerHeight;
        var dialogoverlay =document.getElementById('dialogoverlay2');
        var dialogbox = document.getElementById('dialogbox4');
        dialogoverlay.style.display="block";
        
        dialogbox.style.top="10px";
        dialogbox.style.display="block";
        
    }
    this.Cancel = function(){
        document.getElementById('dialogbox4').style.display ="none";
                document.getElementById('dialogoverlay2').style.display ="none";
               
            
                return false;
        
        }
    
    }
    
    var Alert4= new CustomAlert();  

</script>
<!------------------------>

     
        <style>
        #titleheadings{
             padding:5px 0px;
            }
            
       #stripe-line{
       background:url({!URLFOR($Resource.createevents,'createevents/images/stripe.png')} );
        
          overflow:hidden; 
          height:12px; 
          margin-top:5px; 
           }
           
          #titlecontent{
            font-size:22px; 
            color:#5283cc; 
            margin-right:10px; 
            letter-spacing:.5px; 
            font-family:Bebas Neue; 
            font-weight:normal;float:left;
             overflow:hidden;  
              }
              
            #details-form{
                width:97.5%; 
                height:auto; 
                background-color:#fff;
                padding:10px;
                margin-bottom:20px;
                
                background: white;
                 border-radius: 1px;
               -moz-border-radius: 1px;
               -webkit-border-radius: 1px;
                 box-shadow: 0 1px 3px 0 #b5b5b5;
                -moz-box-shadow: 0 1px 3px 0 #b5b5b5;
                -webkit-box-shadow: 0 1px 3px 0 #b5b5b5;
                 border: 1px solid #DDD;
                 border-bottom:4px solid #5283cc;
             
                }
                
            #details-form table{ border-collapse:collapse;font-size:13px; letter-spacing:.2px; color:#666; }    
            #details-form table tr td{ padding:4px;}    
        
        
        </style>
          <style>
                    .shadowbox{
                        background-color: #FBFBFB;
padding: 3px 0px 8px 0px;
box-shadow: 0 1px 3px 0 #b5b5b5;
-moz-box-shadow: 0 1px 3px 0 #b5b5b5;
-webkit-box-shadow: 0 2px 5px 0 #b5b5b5;
margin-bottom: 12px;
border-radius:1px;
-moz-border-radius:1px;
-webkit-border-radius:1px;
                        }
                    
                    </style>
<!------------------popup for event more info-->
     <div id="dialogoverlay2"></div>
<!--close of dialogoverlay-->
<div id="dialogbox5" style="position:absolute;">
<a id="close" onclick="Alert5.Cancel()"></a>
<div class="grid-1" style="text-align:left;"  >
                
                <div class="content-gird" style=" border-radius: 3px; margin-bottom:20px;background-image:url({!URLFOR($Resource.createevents,'createevents/images/background.gif')} );">
                <div id="titleheadings"> 
               <h3 id="titlecontent" style=""> Event Details</h3>
              
                  <div id="stripe-line"></div><!--close fo stripe-line-->
                    </div><!--close of title heading-->
                  <div id="details-form" >
                 <div id="eventmoreinfob1"  class="shadowbox" style="width:100%; height:auto;">
                  <table width="100%" border="0" style="margin-left: 1%;">
  <tr>
    <td width="10%" style=""><label>Event Name:</label><label id="mandatory">*</label></td>
    <td width="30%" >  <input type="text"  id="eventtitle" name="eventtitle" class="medium" style="width:99%; text-indent:3px; padding:0px;"/></td>
    <td style="text-align:right;"><label>Event Status:</label></td>
    <td width="30%"><input type="text"  id="meventstat"  value="Draft" readonly="readonly" style="width:85%;"/></td>
  </tr>
</table>
 </div><!--close of eventmoreinfo1-->   
  <!---------------------------------------------------------------------------------------->
       <div id="eventmoreinfocontainer" style="width:100%; height:auto;">    
                 <div id="eventmoreinfob1"  class="shadowbox"  style="width:49.5%; height:auto; float:left;">
                 
                 <table width="100%" border="0" style="margin-left: 1%;">
  <tr>
    <td width="20%" ><label>Start date:</label><label id="mandatory">*</label></td>
    <td> 
                  <input type="text"  style="width:90%;" id="meventsdate"  placeholder="__/__/____ __:__"/>
                </td>
  </tr>
  <tr>
    <td><label>End Date :</label><label id="mandatory">*</label></td>
    <td>
                  <input type="text"  style="width:90%;" id="meventedate"  placeholder="__/__/____ __:__"/>
                </td>
  </tr>
</table>

                  </div><!--close left of eventmoreinfob1-->  
                  
                  <div id="eventmoreinfob1"   class="shadowbox"  style="width:49.5%;height: 75px;float:right;">
                  <table width="100%" border="0" style="margin-left: 1%;margin-top: 12px;">
  <tr>
    <td width="20%" ><label>Event Logo:</label></td>
    <td>   <div class="" style="width:112%">
   
    <input type="file" id="eventlogo" onchange="checkfile()" accept="image/jpeg,image/png" style="width:95px;color:transparent;"/>
   <img  width="50" height="50" id="savedimage"/>
      </div></td>
  </tr>
  
</table>
                 
                  </div><!--close right of eventmoreinfob1-->  
                 <div style="clear:both;"></div>
                  </div><!--close of eventmoreinfocontainer-->
                  
  <!-------------------------------------------------------------------------------------->
     <div id="eventmoreinfocontainer" style="width:100%; height:auto;">    
                 <div id="eventmoreinfob1"  class="shadowbox"  style="padding-bottom: 15px;width:49.5%; height:auto; float:left;">
                 
                 <table width="100%" border="0" style="margin-left: 1%;">
  <tr>
    <td width="25%" ><label>Hosting Country:</label></td>
    <td> <select class="selectlist" style="width:95%" id="mcountry" onchange="getstatejs(this.value);" >
                            <apex:repeat value="{!Country}" var="ec">
                           <option value="{!ec.value}">{!ec.label}
                            </option>
                            </apex:repeat>
                          </select></td>
  </tr>
  <tr>
    <td><label>Hosting TimeZone: </label></td>
    <td>  <select class="selectlist" style="width:95%; padding:0px;" id="mhosttime">
                            <apex:repeat value="{!UserTimeZones}" var="utmn">
                            <option value="{!utmn.label}">{!utmn.value}
                            </option>
                            </apex:repeat>
                          </select></td>
  </tr>
  <tr>
    <td><label>Currency Settings: </label></td>
    <td> <select class="selectlist" style="width:95%; padding:0px;" id="mcurrset">
                           <option></option>   
                          </select></td>
  </tr>
  <tr>
    <td><label>Language Settings: </label></td>
    <td> <select class="selectlist" style="width:95%; padding:0px;" id="mlangset">
                            <apex:repeat value="{!LanguageSetting}" var="lst">
                            <option value="{!lst.label}">{!lst.value}
                            </option>
                            </apex:repeat>
                          </select></td>
  </tr>
</table>

                  </div><!--close left of eventmoreinfob1-->  
                  
                 <div id="eventmoreinfob1"  class="shadowbox"  style="width:49.5%; height:auto; float:right;">
                 
                 <table width="100%" border="0" style="margin-left: 1%;">
  <tr>
    <td width="34%" ><label>Event Organizer Email:</label><label id="mandatory">*</label></td>
    <td>     <input type="text"  id="eventorgemail" name="eventorgemail" class="medium" style="width:95%;text-indent:3px; padding:0px;"/>
    </td>
  </tr>
  <tr id="eventorgemailerrormsg" style="display:none;">
   <td></td>
  <td style="color:#d43535; font-size:13px;">Organization email cannot be left blank !</td>
  </tr>
  <tr>
    <td><label>Event Organization Name: </label><label id="mandatory">*</label></td>
    <td>
    <apex:form id="searchform">
     <apex:outputPanel layout="block" style="float: left" id="searchpanel">
 
            <!-- This is our input text that we will use in a wildcard search against the names of the defined object. We refresh the results every time this field
            is clicked or a letter is entered (keyup) -->
            <apex:inputText value="{!searchValue}"  id="searchValue" style="font-weight:bold;font-size: 15px;width:210px;">
                <apex:actionSupport event="onkeyup" action="{!search}" rerender="resultsPanel"/>
                <apex:actionSupport event="onclick" action="{!search}" rerender="resultsPanel"/>
            </apex:InputText>
 
            <!-- Once we perform the query on the object we will populate this list with the returned values. When a user selects a value we will hide this list
            and auto complete the selected value -->
            <apex:outputPanel id="resultsPanel" layout="block" style="position: absolute;">
                <apex:selectList id="srchlist" value="{!comp.name}" size="{!height}" style="width:150px" rendered="{!showList}">
                    <apex:selectOptions value="{!results}"/>
                    <apex:actionSupport event="onchange" action="{!selectvalue}" rerender="resultsPanel,searchValue"/>
                </apex:selectList>
            </apex:outputPanel>
 
    </apex:outputPanel>
 
    <!-- This component has one little piece of javascript. If a user clicks on the screen before selecting a value we want to hide the list of options similar to
    how a normal picklist behaves -->
    <apex:actionFunction name="hideResults" action="{!hideResults}" reRender="resultsPanel"/>
    <script type="text/javascript">
        document.onclick = function(){
            hideResults();
        }
    </script>
    </apex:form>
    
    </td>
  </tr>
  <tr id="eventorgnameerrormsg" style="display:none;">
   <td></td>
  <td style="color:#d43535; font-size:13px;">Organization Name cannot be left blank !</td>
  </tr>
  <tr>
    <td><label>Website Url:</label></td>
    <td> <input type="text"  class="medium" style="width:95%; padding:0px;" id="mweburl"/></td>
  </tr>
    
    <tr id="weburlerrormsg" style="display:none;">
   <td></td>
  <td style="color:#d43535; font-size:13px;">Website Url is not valid !</td>
  </tr>
  <tr>
    <td><label>Phone Number : </label></td>
    <td><input type = "text"  id="mphone" class="medium" style="width:95%; text-indent:3px; padding:0px;" /></td>
  </tr>
   <tr id="pnoerrormsg" style="display:none;">
<td></td>
  <td style="color:#d43535; font-size:13px;">Phone Number is not valid !</td>
  </tr>
</table>

                  </div><!--close right of eventmoreinfob1-->  
                 <div style="clear:both;"></div>
                  </div><!--close of eventmoreinfocontainer-->
   
  <!-------------------------------------------------------------------------------------->
   <!-------------------------------------------------------------------------->
    <div id="eventmoreinfocontainer" style="width:100%; height:auto;">    
                 <div id="eventmoreinfob1"  class="shadowbox"  style="width:49.5%; height:auto; float:left;">
                 
                 <table width="100%" border="0" style="margin-left: 1%;">
  <tr>
    <td width="25%" ><label>Event Category:</label></td>
    <td>   <select class="selectlist" style="width:95%; padding:0px;" id="meventcat">
                            <apex:repeat value="{!EventTypes}" var="et">
                            <option value="{!et.value}">{!et.label}
                            </option>
                            </apex:repeat>
                          </select></td>
  </tr>
  
</table>

                  </div><!--close left of eventmoreinfob1-->  
                  
                  <div id="eventmoreinfob1"   class="shadowbox"  style="width:49.5%;height:auto;float:right;">
                  <table width="100%" border="0" style="margin-left: 1%;margin-top: 10.5px;">
  <tr>
    <td width="35%" ><label>Attendee Registration:</label></td>
    <td> <input type="radio"  style="outline:none;"  checked="checked"  value="By Global Nest" name="mattreg"  /><span style="margin-left:5px; ">By Global Nest</span> 
   <span style="margin-left:3%;"> <input type="radio"  style="outline:none;"  value="By Others" name="mattreg" /><span style="margin-left:5px; ">By Others </span></span>
    
    </td>
  </tr>
  
</table>
                 
                  </div><!--close right of eventmoreinfob1-->  
                 <div style="clear:both;"></div>
                 
                 <!------------------------>
                   <div id="eventmoreinfob1"  class="shadowbox" style="width:100%; height:auto;">
                  <table width="100%" border="0" style="margin-left: 0.5%;">
  <tr>
    <td width="13%" style=""><label>Event Description:</label></td>
    <td colspan="3"><textarea class="medium" id="meventdesc" name="meventdesc" rows="3" style="width:96%;text-indent:3px;"></textarea> </td>
   
  </tr>
</table>

                  
                  </div><!--close of eventmoreinfo1-->
                  </div>
    <!------------------------------------------------------------------------------------->  
   </div><!--close of details-form-->
   <!----------------------------------------end of first section of event more info------------------------------------------->
                  <div  id="venuedetails" style="width:72%; float:left;margin-top:-16px; ">
 <div id="titleheadings" >
               <h3 id="titlecontent" style="">Event Location Details</h3>
              
                  <div id="stripe-line"></div><!--close fo stripe-line-->
                    </div><!--close of title heading--> 
                    
                    <div id="details-form" >
                    <!--------------------------------------------------------------------------------------->
                   <div id="eventmoreinfob1"  class="shadowbox" style="width:100%; height:auto;">
                     <table width="100%" border="0" style="margin-left: 1%;">
  
  <tr>
    <td width="18%"><label>Hosting Location:</label></td>
    <td width="33%"> <input type="text"  id="meventlocation" class="medium" style="width:90%;text-indent:3px; padding:0px;"/></td>
    <td><label>City:</label></td>
    <td><input type="text"  id="mcity" class="medium" style="width:94%;text-indent:3px; padding:0px;"/></td>
  </tr>
  <tr>
    <td><label>Hosting Address 1:</label></td>
    <td>  <input type="text"  id="mhostaddr1" class="medium" style="width:90%;text-indent:3px; padding:0px;"/></td>
   <td><label>State:</label></td>
    <td>  <select class="selectlist" style="width:95%" id="mstate">
                             <option></option>   
                          </select></td>
  </tr>
  <tr>
    <td><label>Hosting Address 2:</label></td>
    <td> <input type="text"  id="mhostaddr2" class="medium" style="width:90%;text-indent:3px; padding:0px;"/></td>
    <td valign="top"><label>Zip Code:</label></td>
    <td valign="top">   <input type="text"  id="mzipcode" class="medium" style="width:94%;text-indent:3px; padding:0px;"/>
    <br/><label id="ziperrormsg" style="color:#d43535; font-size:13px;line-height: 2; display:none;">
    Zip Code is not valid !
    </label>
    </td>
  </tr>
   <!--<tr >
    
    <td  valign="top"></td>
    
    <td valign="top"><label>Po Box:</label></td>
    <td valign="top">   <input type="text"  id="mpobox" class="medium" style="width:99%;text-indent:3px; padding:0px;"/></td>
    
  </tr>-->
  
</table>

                     </div><!--close of eventmoreinfob1-->
                     
                     
                     <!------------------------------------------------------------------------------------------------------------>
                     </div>  <!--close of details-form-->             
          </div><!--close of venue details-->
         
         
         
          <div id="socialbox" style="width:24%; float:right;margin-top:-16px; margin-right:10px; " >
          <div id="titleheadings" >
               <h3 id="titlecontent" style=""> Social Links</h3>
              
                  <div id="stripe-line"></div><!--close fo stripe-line-->
                    </div><!--close of title heading-->        
                  <div id="details-form" style="width:94%" >
                   <div id="eventmoreinfob1"  class="shadowbox" style="width:100%; height:auto;">
                  <table width="100%" border="0">
  <tr>
    <td><img src="{!URLFOR($Resource.createevents,'createevents/images/twhashurl.png')}" width="35px" height="35px" style="float:left;"/><p style="margin-left:18%; margin-top:4px; font-family:Bebas Neue;  font-size:19px;">TAG:</p></td>
  </tr>
  <tr>
    <td><input type="text"  id="meventhashtag" class="medium" style="width:99%;text-indent:3px; padding:0px;"/></td>
  </tr>
  <tr>
    <td><img src="{!URLFOR($Resource.createevents,'createevents/images/twurl.png')}" width="35px" height="35px" style="float:left;"/><p style="margin-left:18%; text-indent:3px;margin-top:5px; font-family:Bebas Neue;  font-size:19px;">URL:</p></td>
  </tr>
  <tr>
    <td><input type="text"  id="mtwiturl" class="medium" style="width:99%;text-indent:3px; padding:0px;"/></td>
  </tr>
  <tr>
    <td><img src="{!URLFOR($Resource.createevents,'createevents/images/fburl.png')}" width="35px" height="30px" style="float:left"/><p style="margin-left:18%; margin-top:5px; font-family:Bebas Neue;  font-size:19px;">URL:</p></td>
  </tr>
  <tr>
  <td>
  <input type="text"  id="mfacebookurl" class="medium" style="width:99%; padding:0px;"/>
</td>
</tr>
</table>

                  
                  </div><!--close of eventmoreinfob1-->
                  </div><!--close of details-form-->
                  </div><!--close of social links-->
                 <div class="indent" style="float:right; margin-top:0px; width:100%; text-align:right; ">

<button class="button-a blue" onclick="validation()">Apply</button>
&nbsp;&nbsp;
<button class="button-a dark-blue" onclick="ClearAll();Alert5.Cancel()">Cancel</button>
</div>

                  <div class="clear"> </div>
                </div><!--close of contentgrid-->
           </div>
            
  </div><!--close of  dialogbox5--> 
      
<!---------------------------------------popup for managetags------------------------------------------------------>        
     <div id="dialogoverlay"></div>
<!--close of dialogoverlay-->
<div id="dialogbox"><a  id="close" onclick="Alert.Cancel()"></a>
<div class="grid-1" style=" width:98%;margin-left:1%; padding-right:0px;">
    <div class="title-grid">Manage Tag</div>
    <div class="content-gird" >
    
    <!--<button id="btnAdicionar">Novo</button>-->
        <table id="managetagpopup" style="width:100%;">         
            <thead>
                <tr style="background-color:#BCBCBC; ">
                    <td colspan="3" style="color:#ffffff;">Edit or Delete your Tags</td>
                    
                </tr>
            </thead>
            <tbody>
                
                
            
            </tbody>
        </table>
    
    
    </div><!--close of content-grid-->
    </div><!--close of grid1-->
</div>  <!--close of dialogbox-->

<!-------------------------------------------------->    
<!------------------------------ticket more info content popup------------->
        <div id="dialogoverlay2"></div>
          <div id="dialogbox3">
          <a  id="close" onclick="Alert3.Cancel()"></a>
        
              <div class="grid-1" style="text-align:left;"  >
             
                <div class="title-grid">More Information</div>
                <div class="content-gird" style="">
     

                
                  <div class="form">
                    <div id="left-form" style=" width:49%; padding-bottom:20px; margin-top:15px;  border:0px #000000 solid; float:left">
                   
                    
                   
                      <div class="elem">
                        <label>Ticket Name: </label>
                        <label id="mandatory">*</label>
                        <div class="indent">
                          <input type="text"  id="tminfoname" name="tminfoname" class="medium"/>
                        </div>
                      </div>
                       <div class="elem">
                        <label>
                        
                         Type: </label>
                        <label id="mandatory">*</label>
                        <div class="indent">
                        <apex:repeat value="{!paymentSelectOptions}" var="paytype">
                        <input type="radio"  style="outline:none;" checked="checked" onchange="validfreetick()"   name="payradio" value="{!paytype.value}"/><span style="margin-left:5px; ">{!paytype.label}</span><br/>
                        </apex:repeat>
                        <script>
                        function validfreetick()
                        {
                            var tmtable = document.getElementById("mytab1");
       for (var p = 1,row; row = tmtable.rows[p]; p++) {
        if(document.querySelector('input[name="payradio"]:checked').value=='Free'){
       row.cells[6].children[0].value=0;
       row.cells[6].children[0].disabled="disabled";
       }
       else{
       row.cells[6].children[0].disabled=false;
       }
       }
       
                        }
                        </script>

                        </div>
                      </div>
                      
                        <div class="elem">
                        <label>Ticket Type:</label>
                        <div class="indent">
                         <select id="itemtype" style="width:76%" class="selectlist" onchange="editticketbadgelabel(this)">
                           <apex:repeat value="{!individualTicketsSelectOptions}" var="indittype">
                            <option value="{!indittype.value}">{!indittype.label}</option>
                            </apex:repeat>                            
                          </select>
                        </div>
                      </div>
                      
                      
                     <script>
                         function editticketbadgelabel(titemtype)
                         {
                             if(titemtype.options[titemtype.selectedIndex].text!='Staff Admission'&&titemtype.options[titemtype.selectedIndex].text!='Seats'&&titemtype.options[titemtype.selectedIndex].text!='Seminars'&&titemtype.options[titemtype.selectedIndex].text!='MatchLeads Seller'&&titemtype.options[titemtype.selectedIndex].text!='Admissions'&&titemtype.options[titemtype.selectedIndex].text!='MatchLeads Buyer')
                            {
                                document.getElementById('tbdglabel').value="";
                                document.getElementById('tbdglabel').disabled="disabled";
                             }
                           else
                             document.getElementById('tbdglabel').disabled=false; 
                         }   
                      </script>
                    
                        
                      
                         <div class="elem">
                        <label for="ch_effects">Ticket visibility: </label>
                        
                     
                        <div class="indent">
                        <input type="checkbox"  style="outline:none;" checked="checked"   id="tvisib" value="" />
                        </div>
             
                                   
                      </div>
                     
                        
     
                    
                     
                    </div>
                    <!--close of left-form-->


<!--script for add tags flag------------------->
                    
                <script>
                  var flagexppp=0;
                function showet1(){
                if(flagexppp==0)
                        { 
                        flagexppp=1;
                        /*alert("block");*/
                            document.getElementById("tagcontentblock").style.display="";
                            
                        }
                        else if (flagexppp==1)
                        {
                            /*alert("hide");*/
                            flagexppp=0;
                            document.getElementById("tagcontentblock").style.display="none";
                             
                        
                        }
                        
            }
            
        
     var TagMap = {};           
                </script>    
                   <!--------close of script---------------> 
                    <script type="text/javascript">//<![CDATA[ 
$(window).load(function(){
//code for adding existing event tags
   
    Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.getEventTag}',
            eventmand.EventID,
           function(result, event){
           
           if (event.status){
                    var appendTxt = '';
                    $.each(result, function(i, resulteach){
                    TagMap[resulteach.Id]=resulteach.Tag_Text__c;
                     $('#abc').append('<table class="results">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+resulteach.Tag_Text__c+'</td>'
                            
                           +'</tr>'
                       + '</table>');
                       
                       $('#abcpk').append('<table class="resultspk">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+resulteach.Tag_Text__c+'</td>'
                            
                           +'</tr>'
                       + '</table>');
                       
                   
                    console.log(TagMap);
                    });
                     $('#addtextlabel').val(''); //clearing textbox value
                      $('#addtextlabelpk').val(''); //clearing textbox value
                    }
                    }
                    );

$(function() {
   $('#btn_s').click(function(e) {
     e.preventDefault();
     var name  = $('input[name="addtagtext"]').val()
if(name !==''){
//code for saving event tag
Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.createEventTag}',
            eventmand.EventID,
            name,
           function(result, event){
            if (event.status){
            if(result!=''){
             $('#abc').append('<table class="results">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+name+'</td>'
                            
                           +'</tr>'
                       + '</table>');
                       
                    $('#addtextlabel').val(''); //clearing textbox value
                    $('#abcpk').append('<table class="resultspk">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+name+'</td>'
                            
                           +'</tr>'
                       + '</table>');
                       
                    $('#addtextlabelpk').val(''); //clearing textbox value
                    TagMap[result] = name;
                    console.log(TagMap);
                    }
                    else
                    {
                       alert('Duplicate value');
                    }
            }
           });
//
        /*alert('no value for addtagtext');*/
   //if($('.results').length < 1) {
      

 //  }
    }
   }
    );
    $('#btn_i').click(function() {
      $('.results').remove();  
    });
});
});//]]>  


 function addtagsshow(){
     document.getElementById("addtagtext").style.display="";
     document.getElementById("addtagsshow").style.display="none";
     
     }
</script>
                    <!------------------------->
               <style> 
    #tagwrapper {
        width:20%; height:auto; background-color:#ffffff; margin-left:13%; border-radius:3px;  position:absolute;margin-top: -2px;
        }               
     #tagtitleblock{
        width:100%; border:1px solid #D0D0D0; height:auto; border-radius:3px; padding:5px 0px;background :url({!URLFOR($Resource.createevents,'createevents/images/ul_playlist_li.png')} ) repeat-x center bottom #F5F5F5; 
         }             
          #tagtitleblock p{  
          font-size:13px; color: #424242; text-align:center;
           } 
           
           #addtagsdiv{width:100%; height:auto; padding-bottom:0px; background-color:#ffffff; padding-top:5px;}      
           /* Styles for results table */
.results {
  /*  width: 600px;*/
    width:95%; 
    margin:0px auto;
    margin-top: 0px;
    text-align:left;
    border: 0px solid #999;
    padding:3px;
    display:block; margin-bottom:5px;
    background-color:#F5F5F5;
    overflow:hidden;
}

.results td{ padding:0px 2px;}

        </style>                
                    <div class="right-form"  style=" width:49%; padding-bottom:20px; margin-top:15px;  border:0px #000000 solid; float:right">
                       <!--start of tags--->
                       <div style="float:left;">Tags:</div>
                       <div id="tagwrapper" style="">
                       
                       <div id="tagtitleblock" onClick="showet1()" style="">
                       
                       <p ><span><img src="  {!URLFOR($Resource.createevents,'createevents/images/check_black.png')}"  style="margin-right:5%;"/></span>Tags</p>
                       </div><!--close of tagtitleblock-->
         
          <div id="tagcontentblock" style="width:100%;height:auto; display:none; z-index:999999; border:1px solid #D0D0D0; border-top:0px; position:relative; background-color:#ffffff; ">
          
          
          <div id="addtagsdiv" style="">
          
           <!----------------------------------------------------->
            <div id="abc" style="width:100%;">


</div>

  <!--------------------------------------->
  <div style="display:block; border-top: 1px #E5E5E5 solid;border-bottom: 1px #E5E5E5 solid; background-color:#F7F7F7; text-align:center;font-size:18px; font-family:cuprum; color:#5283cc;">
    <div id="addtagsshow" onClick="addtagsshow()" >
     <span style="margin-right:10%;"><img src=" {!URLFOR($Resource.createevents,'createevents/images/addtag.png')}" width="18px" height="18px" style="margin-right:2%; margin-bottom:-3px;"/>Add Tags</span>
    </div>
    <table id="addtagtext" border="0" width="95%" style="margin:0px auto; margin-top:5px; margin-bottom:5px; display:none;">
    <tbody>
        <tr>
      <!--<td style="text-align:left">Tag Name</td>-->
      <td><input id="addtextlabel" type="text" name="addtagtext" placeholder="" style="width:80%;"/></td>
      <td>
       <div class="buttonHolder">   
    <input class="button-a blue"  type="button" name="submit" value="Save" onclick="" id="btn_s" />
    <!--<input class="button-a blue"  value="clear" type="button" id="btn_i">--> 
  </div></td>
      <!--<td><input type="checkbox" name="check"></td>-->
    
    </tr>
    
  </tbody></table>
  </div>
 
 
             <!-------------------------------------------------------->
          </div><!--close of addtagsdiv-->
           
           <div id="managetagbtn" onclick="Alert.render()"  style="width:100%; cursor:pointer; text-align:center; background-color:#F7F7F7; padding:5px 0px; font-size:18px; font-family:cuprum; color:#5283cc;">
           
           <img src=" {!URLFOR($Resource.createevents,'createevents/images/manage.png')}" width="20px" height="20px" style="margin-right:2%; margin-bottom:-3px;"/>Manage Tags
           
           </div><!--close of managetagbutton-->
          
          <!--------------------------------------------------------------------->
            </div><!--close of tagcontentblock-->
          
          </div><!--close of tagwrapper-->
                        <!--End of tags--->
                     
                      <div class="elem" style="margin-top:25px;">
                        <label>Ticket Description:</label>
                        <div class="indent">
                          <textarea class="medium" id="tdesc" name="tdesc" rows="5" style="width:75%"></textarea>
                        </div>
                      </div>
                       <div class="elem">
                        <label>Ticket Image:</label>
                        <div class="indent">
                          <div>
<input type="file" id="ticketlogo" onchange="checkticketlogo()" accept="image/jpeg,image/png" style="width:95px;color:transparent;"/>
<img  width="50" height="50" id="savedticketimage"/>
                          </div>
                        </div>
                      </div>
                        
                        <div class="elem">
                        <label> Badge Label:</label>
                        <div class="indent">
                          <input type="text" id="tbdglabel" value=""/>
                        </div>
                      </div>
                      <!------------------------------------->
                       <br/>
                       </div> <!--close of right-form-->
                    <script>
                 var ticketlogourl='';
function showet()
{

$(".dynamic3").find("tr:gt(0)").remove();
var appendTxt = "<tr><td><input type='text' id='one' name='input_box_one[]' placeholder='' value='"+earlybudname+" Early'/></td><td>  <input type='text' style='width:75%' class='datetimepickers' value='"+new Date().today()+" " + new Date().timeNow()+"'/></td><td><input type='text' style='width:75%' class='datetimepickers'/></td><td><input type='text' id='three' name='input_box_three[]'  value='"+earlybudqty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='"+earlybudprice+"'/></td><td id='regticket' style='display:none;'><input type='button' class='del2' title='Delete Ticket' value='' /></td></tr>";
appendTxt += "<tr><td><input type='text' id='one' name='input_box_one[]' placeholder='' value='"+earlybudname+" Regular'/></td><td>  <input type='text' style='width:75%' class='datetimepickers'/></td><td><input type='text' style='width:75%' class='datetimepickers'/></td><td><input type='text' id='three' name='input_box_three[]'  /></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  /></td><td id='regticket' style='display:none;'><input type='button' class='del2' title='Delete Ticket' value='' /></td></tr>";
appendTxt += "<tr><td><input type='text' id='one' name='input_box_one[]' placeholder='' value='"+earlybudname+" Late'/></td><td>  <input type='text' style='width:75%' class='datetimepickers'/></td><td><input type='text' style='width:75%' class='datetimepickers' value='"+document.getElementById('eventedate').value+"'/></td><td><input type='text' id='three' name='input_box_three[]'  /></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]' /></td><td id='regticket' style='display:none;'><input type='button' class='del2' title='Delete Ticket' value='' /></td></tr>";
$(".dynamic3 tbody").append(appendTxt);
var tmtable = document.getElementById("mytab1");
       for (var p = 1,row; row = tmtable.rows[p]; p++) {
        if(document.querySelector('input[name="payradio"]:checked').value=='Free'){
       row.cells[6].children[0].value=0;
       row.cells[6].children[0].disabled="disabled";
       }
       else{
       row.cells[6].children[0].disabled=false;
       }
       }
//document.getElementById("earlybirdbuttons").style.backgroundImage="none";
//document.getElementById("earlybirdbuttons").style.border="none";
//document.getElementById("earlybirdbuttons").style.outline="none";

}
            
 </script>
                    
                    <div style="clear:both;"></div>
      <!--------------------------->
                      <div style="float:left; margin-bottom:10px;">
         <button id="earlybirdbuttons" class="button-a blue" onClick="showet()"  style="float:left">Early Bird Tickets</button>
               </div>
                   
          <!-------------------------------------------------->
  
                   <table class="display dynamic3" id="mytab1" style="width:100%; margin:0px auto; display:;">
            <thead>
              <tr>
                <th width="27%" style="padding:3px 0px 3px 2px; font-size:13px; text-indent:8px;">Ticket Name</th>
                <th width="15%" style="padding:3px 0px 3px 2px;font-size:13px;text-indent:8px;">Sale Start Date</th>
                <th width="15%" style="padding:3px 0px 3px 2px;font-size:13px;text-indent:8px;">Sale End Date</th>
                  <th width="11%" style="padding:3px 0px 3px 2px;font-size:13px;text-indent:8px;">Qty</th>
                  <th width="10%" style="padding:3px 0px 3px 2px;font-size:13px;;text-indent:0px;">Order Min-Qty</th>
                  <th width="10%" style="padding:3px 0px 3px 2px;font-size:13px;text-indent:0px;">Order Max-Qty</th>
                <th width="13%" style="padding:3px 0px 3px 2px;font-size:13px;text-indent:8px;">Price</th>
               
                <th id="regth" width="" style="display:none;"></th>
              </tr>
            </thead>
            
            <tbody>
          </tbody></table> 
          
       
                   
                    <div class="indent" style="float:right; margin-top:10px; margin-right:10px;"> 
   
                        <button class="button-a blue" onclick="saveticketalert()" >Apply</button>
                        <script>
                        function saveticketalert()
                        {
                           if(tckcontents=='')
                           {
                              getAll();
                              ticketlogourl='';
                           }
                           else{
                           saveTicketLogo(tckcontents);
                           document.getElementById('ticketloader').style.display='';}
                           Alert3.Cancel();
                           return false;
                        }
                        </script>
                        &nbsp;&nbsp;
                        <button class="button-a dark-blue" onclick="Alert3.Cancel()" >Cancel</button>
                      </div>
                        <apex:form >
      <apex:actionfunction name="saveTicketLogo" action="{!saveEventLogo}" rerender="reRenderedPanelToSetTicketVariable" oncomplete="getAll();document.getElementById('ticketloader').style.display='none';">
      <apex:param name="imageData" value="" assignTo="{!imageData}"/>
</apex:actionfunction></apex:form>
<apex:outputPanel id="reRenderedPanelToSetTicketVariable">
   <script type="text/javascript">
       
      ticketlogourl= "{!eventlogourl}";
      
   </script>
</apex:outputPanel>
                      <script>
                     var tckcontents='';
                     function checkticketlogo()
                     {
                          
                             var oFReader = new FileReader();
                     var f = document.getElementById("ticketlogo").files[0];
          

           if (f) {
      var r = new FileReader();
      r.onload = function(e) { 
      tckcontents = e.target.result.split(',')[1];
      document.getElementById('savedticketimage').src=e.target.result;
                 
      }
      r.readAsDataURL(f);
     
    } else { 
      alert("Failed to load file");
    }
    
                     }
                      
                     function getAll()
                     {
                        
                                                 
                        for(var pi=0;pi<ticketlist.length;pi++) 
                        {
                             if(ticketlist[pi].trowid==parentrowindex)
                             {
                                  //set the grouptickets array to null
                                 
                                   ticketlist[pi].grouptickets=[];
                                   
                                 //Get the inner table values
                                 var table = document.getElementById("mytab1");
                                 for (var i = 1, row,nhiderow=0,totqty=0,totprice=0; row = table.rows[i]; i++) {
                                 if(row.style.display!='none'){
                       
                        ticketlist[pi].grouptickets.push({tname:"",sdate:"",edate:"",qty:"",minqty:"",maxqty:"",tprice:""});
                        ticketlist[pi].grouptickets[nhiderow].tname=row.cells[0].children[0].value;
                        ticketlist[pi].grouptickets[nhiderow].sdate=row.cells[1].children[0].value;
                        ticketlist[pi].grouptickets[nhiderow].edate=row.cells[2].children[0].value;
                        ticketlist[pi].grouptickets[nhiderow].qty=row.cells[3].children[0].value;
                        ticketlist[pi].grouptickets[nhiderow].minqty=row.cells[4].children[0].value;
                        ticketlist[pi].grouptickets[nhiderow].maxqty=row.cells[5].children[0].value;
                        if(Number(ticketlist[pi].grouptickets[nhiderow].maxqty)>Number(ticketlist[pi].grouptickets[nhiderow].qty))
                        ticketlist[pi].grouptickets[nhiderow].maxqty=ticketlist[pi].grouptickets[nhiderow].qty;
                        ticketlist[pi].grouptickets[nhiderow].tprice=row.cells[6].children[0].value;
                        totqty+=Number(row.cells[3].children[0].value);
                        totprice+=Number(row.cells[6].children[0].value);
                        nhiderow++;
                        }
                             }
                             
                             ticketlist[pi].ticketcount=nhiderow;
                              ticketlist[pi].itemtype=document.getElementById('itemtype').value;
                             ticketlist[pi].ispackage="false";
                             
                             document.getElementById("tickettable").rows[parentrowindex].cells[2].children[0].value=totqty;
                             if(ticketlist[pi].ticketcount>1)
                             document.getElementById("tickettable").rows[parentrowindex].cells[3].children[0].value='Group Tickets';
                             else
                             document.getElementById("tickettable").rows[parentrowindex].cells[3].children[0].value=totprice;
                             try{
                             document.getElementById("tickettable").rows[parentrowindex].cells[0].children[0].value=document.getElementById('tminfoname').value;}catch(e){}
                             document.getElementById("tickettable").rows[parentrowindex].cells[1].children[0].value=document.querySelector('input[name="payradio"]:checked').value;
                            
                             ticketlist[pi].tvisib=$('#tvisib').attr('checked');
                             ticketlist[pi].tdesc=document.getElementById('tdesc').value;
                             ticketlist[pi].tbdglabel=document.getElementById('tbdglabel').value;
                             

  if(ticketlogourl!=''){
  ticketlist[pi].tcketlogo=ticketlogourl;
  tckcontents='';
  ticketlogourl=''
  }
                             //
                             
                             //set the tags array to null
                                   
                                  ticketlist[pi].tags=[];
                             //code for adding tags
                             var testimonialElements = $(".results");
                             
                             for(var f=0,tgindex=0; f<testimonialElements.length; f++){
                                  
                                  var element = testimonialElements.eq(f);
                                  if(element[0].children[0].children[0].children[0].children[0].checked){
                                  ticketlist[pi].tags.push({tagname:""});
                                  //store eventtag id
                                  ticketlist[pi].tags[tgindex].tagname=getKeyByValue(TagMap,element[0].children[0].children[0].children[1].innerHTML);
                                  tgindex++;
                                  }
                                  }
                             //end of tags
                            
                        }
                        }
                         
                      
                     
                    }
                     </script>
                      
                    <!----dynamic table for tickets on the popup---->
                       
          <!------------------------------end of dynamic table------------>
                    <div class="clear"> </div>
                  </div><!--close of form-->
                   <!------------------->
                <div class="clear"> </div>
                </div><!--close of contentgrid-->
             
           </div><!--close of grid-1-->
           
            </div><!--close of dialogbox3-->
            
            
<!--------------------------------close of more ticket info popup------------->
<!------------------------------Booth leads product rows script------------->
  
                            <script>
                            
                            
                            
function lrrow(chkid,ittypenumber,id){
if (document.getElementById(chkid).checked==true){
Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.getTickets}',
            ittypenumber,
            id, 
            function(result, event){
             
 $.each(result, function(i, resulteach){
                console.log(resulteach.ticketName);
               if(resulteach.show==true){
      var appendTxt = "<tr id="+id+"><td><input type='text' class='tickfield' id='one' name='input_box_one[]' value='"+resulteach.ticketName+"'></td> <td><SELECT class=' selectlist ' NAME=\"Animal\"><apex:repeat value="{!paymentSelectOptions}" var="paytype"><option value='{!paytype.value}'>{!paytype.label}</option></apex:repeat></SELECT></td></td><td><input type='text' class='tickfield name='input_box_two[]' /></td><td><input type='text' id='three' class='tickfield' name='input_box_three[]' placeholder='"+resulteach.ticketPrice+"' /></td><td  style='text-align:center;'><a  onClick=Alert3.render(this.parentNode.parentNode.rowIndex,this.parentNode.parentNode.children[0].children[0].value,this.parentNode.parentNode.children[1].children[0].value,this.parentNode.parentNode.children[2].children[0].value,this.parentNode.parentNode.children[3].children[0].value)><div id='nwmoreinfodiv' style='margin-right:32%;'><img src={!URLFOR($Resource.createevents,'createevents/images/addmore.png')} width='25px' height='25px'/></div></a></td> <td><input type='button' class='del' value='' /></td></tr>";
      $(".dynamic tbody").append(appendTxt); 
      saveTicketSate(); 
         for(var j=0;j<ticketlist.length;j++)
           {
           if(ticketlist[j].trowid==$(".dynamic tr:last").index()+1){
          
            ticketlist[j].itemtype=resulteach.ticketId;
           }
           }
      
      boothleadproduct.push({tname:"",tprice:"",tqty:"",ttypeid:""});
      boothleadproduct[bpindex].tname=resulteach.ticketName;
      boothleadproduct[bpindex].tprice=resulteach.ticketPrice;
      boothleadproduct[bpindex].ttypeid=resulteach.ticketId;
      bpindex++;
      }
            });
          sessionStorage['blproduct']=JSON.stringify(boothleadproduct);   
            }, 
            {escape: true}
        );
       
}
else
{

 for(var j=0;j<ticketlist.length;j++)
           {
           if(ticketlist[j].trowid==$("#"+id).index()+1){
            ticketlist.splice(j, 1);
            ticketlist.push({tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""});
            }
           
           }
               

  $("#"+id).remove();
  //$("#"+id).attr("id",""); 
}



 }
</script> 
<!----script for bl products button show hide-->
 <script>
    
  var flagexpp=0;
     function blprod(){
        
          if ( flagexpp==0){
            flagexpp=1;  
         document.getElementById("boothleadsprodcontents").style.display="";
         document.getElementById("expblp").src="{!URLFOR($Resource.createevents,'createevents/images/minusoptions1.png')}";
          }
          
          else{
              document.getElementById("boothleadsprodcontents").style.display="none";
             document.getElementById("expblp").src="{!URLFOR($Resource.createevents,'createevents/images/Addoptions1.png')}";  
             flagexpp=0;
              
              }
         
         }
     
     </script>
     <style>
     #blprodlink{background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(253,253,253,1)), color-stop(100%,rgba(227,227,227,1)));
background: -webkit-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: -o-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: -ms-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fdfdfd', endColorstr='#e3e3e3',GradientType=0 );
border: 1px solid #e3e3e3;
padding:5px; border-radius:3px; color:#3895ba; font-size:12px;}

 #blprodlink:hover{ text-decoration:none;}
 
 .pkgbttn{background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(253,253,253,1)), color-stop(100%,rgba(227,227,227,1)));
background: -webkit-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: -o-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: -ms-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fdfdfd', endColorstr='#e3e3e3',GradientType=0 );
border: 1px solid #e3e3e3;
padding:5px; border-radius:3px; color:#3895ba; font-size:12px; cursor:pointer; float:right; margin-bottom:10px; margin-top:-5px; margin-right:10px;}
 
 #boothleadsprodcontents table{ border-collapse:collapse; margin-left:1%;border: 1px solid #e3e3e3; margin-top:-3px;}
   #boothleadsprodcontents table tr td{ padding:0px 3px; border:none;}  
   #boothleadsprodcontents table tr{  border:none;}   
       </style>
       <style>
#tagwrapperpk {
width:20%; height:auto; background-color:#ffffff; margin-left:13%; border-radius:3px; position:absolute;margin-top: -2px;
}
#tagtitleblockpk{
width:100%; border:1px solid #D0D0D0; height:auto; border-radius:3px; padding:5px 0px;background: url({!URLFOR($Resource.createevents,'createevents/images/ul_playlist_li.png')} ) repeat-x center bottom #F5F5F5;
}
#tagtitleblockpk p{
font-size:13px; color: #424242; text-align:center;
}

#addtagsdiv{width:100%; height:auto; padding-bottom:0px; background-color:#ffffff; padding-top:5px;}
/* Styles for results table */
.resultspk {
/* width: 600px;*/
width:95%;
margin:0px auto;
margin-top: 0px;
text-align:left;
border: 0px solid #999;
padding:3px;
display:block; margin-bottom:5px;
background-color:#F5F5F5;
overflow:hidden;
}

.resultspk td{ padding:0px 2px;}

</style>

<!--------------------------------close of Booth leads product popup------------>
<!------------------------------package Moreinfo popup------------->
        <div id="dialogoverlay2"></div>
            <div id="dialogbox4">
          <a  id="close" onclick="Alert4.Cancel()"></a>
          

<!---tmore package info popup------------->
          
          
          <div id="morepackageinfo">
                     <div class="grid-1" style="text-align:left;"  >
                <div class="title-grid">Create Package</div>
                <div class="content-gird">
                  <div class="form">
                    <div id="left-form" style=" width:49%; padding-bottom:20px; margin-top:15px;  border:0px #000000 solid; float:left">
                   
                    
                   
                      <div class="elem">
                        <label>Package Name: </label>
                        <label id="mandatory">*</label>
                        <div class="indent">
                          <input type="text"  id="pminfoname" name="pminfoname" class="medium"/>
                        </div>
                      </div>
                       <div class="elem">
                        <label>Package Type: </label>
                        <label id="mandatory">*</label>
                        <div class="indent">
                        <apex:repeat value="{!paymentSelectOptions}" var="paytype">
                        <input type="radio" onchange="validfreepack()"  style="outline:none;" checked="checked"   name="pkgpayradio" value="{!paytype.value}"/><span style="margin-left:5px; ">{!paytype.label}</span><br/>
                        </apex:repeat>
                        <script>
                        function validfreepack()
                        {
                            var pmtable = document.getElementById("packagemoreinfotable");
       for (var p = 1,row; row = pmtable.rows[p]; p++) {
        if(document.querySelector('input[name="pkgpayradio"]:checked').value=='Free'){
       row.cells[6].children[0].value=0;
       row.cells[6].children[0].disabled="disabled";
       }
       else{
       row.cells[6].children[0].disabled=false;
       }
       }
       
                        }
                        </script>
                        </div>
                      </div>
                      
                     <div class="elem">
                        <label>Ticket Type:</label>
                        <div class="indent">
                          <select class="selectlist" style=" width:76%;" id="pkitemtype">
                          
                            <apex:repeat value="{!itemtypespackage}" var="ittype">
                            <option value="{!ittype.value}">{!ittype.label}
                            </option>
                            </apex:repeat>
                            
                            
                          </select>
                        </div>
                      </div>
                      
                      
                     
         
                     
                    </div>
                    <!--close of left-form-->
                    
                    <div class="right-form"  style=" width:49%; padding-bottom:20px; margin-top:15px;  border:0px #000000 solid; float:right">
                   <!---------------------PACKAGE TAGS------>
                   <div style="float:left;">Tags:</div>
                   <div id="tagwrapperpk" style="">
                       
                       <div id="tagtitleblockpk" onclick="showet2()" style="">
                       
                       <p style=""><span><img src="{!URLFOR($Resource.createevents,'createevents/images/check_black.png')}" style="margin-right:5%;"/></span>Tags</p>
                       </div><!--close of tagtitleblock1-->
         
          <div id="tagcontentblockpk" style="display:none;width: 100%; height: auto; z-index: 999999; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(208, 208, 208); border-bottom-color: rgb(208, 208, 208); border-left-color: rgb(208, 208, 208); position: relative; background-color: rgb(255, 255, 255);">
          
          
          <div id="addtagsdivpk" style="">
          
           <!----------------------------------------------------->
            <div id="abcpk" style="width:100%; padding-top:5px;">


</div>

<!--script for add tags flag------------------->
                    
                <script>
                  var flagexppp=0;
                function showet2(){
                if(flagexppp==0)
                        { 
                        flagexppp=1;
                        /*alert("block");*/
                            document.getElementById("tagcontentblockpk").style.display="";
                            
                        }
                        else if (flagexppp==1)
                        {
                            /*alert("hide");*/
                            flagexppp=0;
                            document.getElementById("tagcontentblockpk").style.display="none";
                             
                        
                        }
                        
            }
            
        
                
                </script>    
                   <!--------close of script---------------> 
                    <script type="text/javascript">//<![CDATA[ 
$(window).load(function(){
$(function() {
   $('#btn_spk').click(function(e) {
     e.preventDefault();
     var name  = $('input[name="addtagtextpk"]').val()
if(name !==''){
       Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.createEventTag}',
            eventmand.EventID,
            name,
           function(result, event){
            if (event.status){
            if(result!=''){
       $('#abcpk').append('<table class="resultspk">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+name+'</td>'
                            
                           +'</tr>'
                       + '</table>');
                       
                    $('#addtextlabelpk').val(''); //clearing textbox value
                     $('#abc').append('<table class="results">'
                         +'<tr>' 
                          +'<td>'+'<input type="checkbox" />'+'</td>'
                            +'<td>'+name+'</td>'
                            
                           +'</tr>'
                       + '</table>');
                       
                    $('#addtextlabel').val(''); //clearing textbox value
                     TagMap[result] = name;
                    console.log(TagMap);
                    }
                    else
                    {
                       alert('Duplicate value');
                    }
            }
           });

 //  }
    }
   }
    );
    $('#btn_ipk').click(function() {
      $('.resultspk').remove();  
    });
});
});//]]>  


 function addtagsshow2(){
     document.getElementById("addtagtextpk").style.display="";
     document.getElementById("addtagsshowpk").style.display="none";
     
     }
</script>
                    <!------------------------->


  <!--------------------------------------->
  <div style="display:block; border-top: 1px #E5E5E5 solid;border-bottom: 1px #E5E5E5 solid; background-color:#F7F7F7; text-align:center;font-size:18px; font-family:cuprum; color:#5283cc;" class="inactive">
    <div id="addtagsshowpk" onclick="addtagsshow2()" style="padding-top: 1px; display: none;">
     <span style="margin-right:10%;"><img src="images/addtag.png" width="18px" height="18px" style="margin-right:2%; margin-bottom:-3px;"/>Add Tags</span>
    </div>
    <table id="addtagtextpk" border="0" width="95%" style="margin: 5px auto;">
    <tbody>
        <tr>
      <!--<td style="text-align:left">Tag Name</td>-->
      <td><input id="addtextlabelpk" type="text" name="addtagtextpk" placeholder="" style="width:80%;"/></td>
      <td>
       <div class="buttonHolder">   
    <input class="button-a blue" type="button" name="submit" value="Save" onclick="" id="btn_spk"/>
    <!--<input class="button-a blue"  value="clear" type="button" id="btn_i">--> 
  </div></td>
      <!--<td><input type="checkbox" name="check"></td>-->
    
    </tr>
    
  </tbody></table>
  </div>
 
 
             <!-------------------------------------------------------->
          </div><!--close of addtagsdiv-->
           
           <div id="managetagbtn1" onclick="Alert.render()" style="width:100%; cursor:pointer; text-align:center; background-color:#F7F7F7; padding:5px 0px; font-size:18px; font-family:cuprum; color:#5283cc;">
           
           <img src="{!URLFOR($Resource.createevents,'createevents/images/manage.png')}" width="20px" height="20px" style="margin-right:2%; margin-bottom:-3px;"/>Manage Tags
           
           </div><!--close of managetagbutton-->
          
          <!--------------------------------------------------------------------->
            </div><!--close of tagcontentblock-->
          
          </div>
                   <!--END OF PACKAGE TAGS-->
                      
                        <div class="elem">
                        <label style="margin-top:10px;">Package visibility: </label>
                         <div class="indent" style="margin-top:15px;">
                       <input type="checkbox"  id="pkvisib" value="" />
                      </div>
                      </div>
                      <div class="elem">
                        <label>Package Description:</label>
                        <div class="indent">
                          <textarea class="medium" id="pkdesc" name="pkdesc" rows="5" style="width:75%"></textarea>
                        </div>
                      </div>
                       <div class="elem">
                        <label>Package Image:</label>
                        <div class="indent">
                          <div>
                             <input type="file" id="pklogo" onchange="checkpackagelogo()" accept="image/jpeg,image/png" style="width:95px;color:transparent;"/>
                             <img  width="50" height="50" id="savedpackageimage" />
                          </div>
                        </div>
                      </div>
                      <br/>
                   
                    </div> <!--close of right-form-->
                     <script>
                 
function showetpck()
{

$(".dynamic4").find("tr:gt(0)").remove();
var appendTxt = "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+earlybudname+" Early'/></td> <td><input type='text' style='width:75%' class='datetimepickers' value='"+new Date().today()+" " + new Date().timeNow()+"'/></td><td><input type='text' style='width:75%' class='datetimepickers'  /></td><td><input type='text' id='three' name='input_box_three[]' value='"+earlybudqty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+earlybudprice+"'/></td></tr>";
appendTxt += "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+earlybudname+" Regular'/></td> <td><input type='text' style='width:75%' class='datetimepickers' /></td><td><input type='text' style='width:75%' class='datetimepickers'  /></td><td><input type='text' id='three' name='input_box_three[]' value=''/></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]' value=''/></td></tr>";
appendTxt += "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+earlybudname+" Late'/></td> <td><input type='text' style='width:75%' class='datetimepickers' /></td><td><input type='text' style='width:75%' class='datetimepickers'  value='"+document.getElementById('eventedate').value+"'/></td><td><input type='text' id='three' name='input_box_three[]' value=''/></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]' value=''/></td></tr>";
$(".dynamic4 tbody").append(appendTxt);

/*document.getElementById("optionspck").style.display="";
document.getElementById("options1pck").style.display="";
document.getElementById("regpck").style.display="";
document.getElementById("regtdpck").style.display="";
document.getElementById("earlybirdbuttons1").style.backgroundImage="none";
document.getElementById("earlybirdbuttons1").style.border="none";
document.getElementById("earlybirdbuttons1").style.outline="none";*/

}
            
 </script> 
 <div style="clear:both;"></div>
                    <div style="float:left; margin-bottom:10px;">
         <button id="earlybirdbuttons1" class="button-a blue" onclick="showetpck()" style="float:left">Early Bird Package</button>
               </div>
                    
                     <table class="display dynamic4" id="packagemoreinfotable" style="width:100%; margin:0px auto;">
            <thead>
              <tr>
                <th width="28%" style="padding:3px 0px 3px 2px; text-indent:5px;">Package Item Name</th>
                <th width="15%" style="padding:3px 0px 3px 2px;text-indent:5px;">Start Date</th>
                <th width="15%" style="padding:3px 0px 3px 2px;text-indent:5px;">End Date</th>
                  <th width="11%" style="padding:3px 0px 3px 2px;text-indent:5px;">Qty</th>
               <th width="10%" style="padding:3px 0px 3px 2px;font-size:13px;;text-indent:0px;">Order Min-Qty</th>
                  <th width="10%" style="padding:3px 0px 3px 2px;font-size:13px;text-indent:0px;">Order Max-Qty</th>
                 <th width="15%" style="padding:3px 0px 3px 2px;text-indent:5px;">Price</th>
                 <!--<th id="regpck" width="" ><input type='button' class='add3' value='' /></th>-->
              </tr>
            </thead>
            <tbody>
                 
                       
            
            
          </tbody></table>
        
           <div class="indent" style="float:right; margin-top:10px; margin-right:10px;"> 
   
                        <button class="button-a blue" onclick="calpackagegrouptotal()">Apply</button>
                        <button class="button-a dark-blue" onclick="cancelpackagegrouptotal()">Cancel</button>
                        <script>
                        function cancelpackagegrouptotal()
                        {
                           var rowindex;
      if(isnewpackage=="true")
       rowindex=$(".dynamic tr:last").index()+1;
        else
       rowindex=parentrowindex-1;
       var appendTxt='';
       var totprice=0,totqty=0;
       for(var j=0,count=0;j<ticketlist[rowindex].ticketcount;j++)
           {
             
          appendTxt += "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+escape(ticketlist[rowindex].grouptickets[j].tname)+"'/></td> <td><input type='text' style='width:75%' class='datetimepickers' value='"+ticketlist[rowindex].grouptickets[j].sdate+"'/></td><td><input type='text' style='width:75%' class='datetimepickers'  value='"+ticketlist[rowindex].grouptickets[j].edate+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[rowindex].grouptickets[j].qty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+ticketlist[rowindex].grouptickets[j].minqty+"'/></td><td><input type='text' id='three' name='input_box_three[]'  value='"+ticketlist[rowindex].grouptickets[j].maxqty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+document.getElementById('packageprice').value+"'/></td></tr>";
           totqty+=Number(ticketlist[rowindex].grouptickets[j].qty);
              totprice+=Number(ticketlist[rowindex].grouptickets[j].tprice);
              count++;
           }
           if(appendTxt!=''){
           $(".dynamic4").find("tr:gt(0)").remove();
      $(".dynamic4 tbody").append(appendTxt);}
      else
      {
           var datetime =new Date().today()+" " + new Date().timeNow();
     var txt= "<tr><td><input type='text' id='one' name='input_box_one[]' value='"+escape(earlybudname)+"'/></td> <td><input type='text' style='width:75%' class='datetimepickers' value='"+datetime+"'/></td><td><input type='text' style='width:75%' class='datetimepickers'  value=''/></td><td><input type='text' id='three' name='input_box_three[]' value='"+earlybudqty+"'/></td><td><input type='text' id='three' name='input_box_three[]' value='{!itemdefaultminqty}'/></td><td><input type='text' id='three' name='input_box_three[]'  value='{!itemdefaultmaxqty}'/></td><td><input type='text' id='three' name='input_box_three[]' value='"+earlybudprice+"'/></td></tr>";
      $(".dynamic4").find("tr:gt(0)").remove();
      $(".dynamic4 tbody").append(txt);
      }
      
      if(appendTxt!=''){
       if(count>1)
                             document.getElementById('packageprice').value='Group Packages';
                             else
                             document.getElementById('packageprice').value=totprice;
               document.getElementById('packageqty').value=totqty;
               }
       Alert4.Cancel();
                        }
                        function calpackagegrouptotal()
                        {
                             var table = document.getElementById("packagemoreinfotable");
                             
                             var totprice=0,totqty=0;
                             for (var i = 1, row,nhiderow=0; row = table.rows[i]; i++) {
       
        if(row.style.display!='none'){
              totqty+=Number(row.cells[3].children[0].value);
              totprice+=Number(row.cells[6].children[0].value);
              
              nhiderow++;
         }
       }
       if(nhiderow>1)
                             document.getElementById('packageprice').value='Group Packages';
                             else
                             document.getElementById('packageprice').value=totprice;
               document.getElementById('packageqty').value=totqty;
        Alert4.Cancel();
                        }
                        </script>
           </div>                      
                   
                   
                      
                    <!----dynamic table for tickets on the popup---->
                       
          <!------------------------------end of dynamic table------------>
                    <div class="clear"> </div>
                  </div><!--close of form-->
             
                  <div class="clear"> </div>
                </div><!--close of contentgrid-->
           </div>
            </div>
            
            
            <!--close of more package info popup------------->
          
          </div><!--close of dialogbox4--------->
<!---------------------------end of package moreinfo content popup------------------>

<style type="text/css">
dl.Zebra_Accordion {
    width: 100%;
    font-family: Arial, sans-serif;
    font-size: 12px; 
}
dl.Zebra_Accordion dt {
    border: solid 1px #186f8f;
background-color: #3bb3e0;
background-image: linear-gradient(bottom, rgb(44,160,202) 0%, rgb(62,184,229) 100%);
background-image: -o-linear-gradient(bottom, rgb(44,160,202) 0%, rgb(62,184,229) 100%);
background-image: -moz-linear-gradient(bottom, rgb(44,160,202) 0%, rgb(62,184,229) 100%);
background-image: -webkit-linear-gradient(bottom, rgb(44,160,202) 0%, rgb(62,184,229) 100%);
background-image: -ms-linear-gradient(bottom, rgb(44,160,202) 0%, rgb(62,184,229) 100%);
background-image: -webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(44,160,202)), color-stop(1, rgb(62,184,229)) );
-webkit-box-shadow: inset 0px 1px 0px #7fd2f1, 0px 1px 0px #fff;
-moz-box-shadow: inset 0px 1px 0px #7fd2f1, 0px 1px 0px #fff;
box-shadow: inset 0px 1px 0px #7fd2f1, 0px 1px 0px #fff;
    
    color: #fff !important;
    text-shadow: 0 1px 0 #3d7933;

    margin-left: 87%;
    width: 12%;
    cursor: pointer;
    border-radius: 3px;
    color: #FFF;
    font-weight: bold;
    padding: 5px
}
dl.Zebra_Accordion dd {
    background: #F7F7F7;
    padding: 15px;
    margin: 1px 0;

    height:auto;
}
dl.Zebra_Accordion dt.Zebra_Accordion_Expanded {
    background: #3bb3e0;
border:none;
}

</style>
<!-------------------End of Zebra Accordian js and css---------------->

<style type="text/css">

#ticketinfo 
{
height:27px;
width:30px;
margin-top:2px;
margin-left:25%;


}
#package-button{
        background-color: #4f9d42;
*/  background-image: -ms-linear-gradient(#68b946, #4f9d42);
    background-image: -moz-linear-gradient(#68b946, #4f9d42);
    /* background-image: -webkit-linear-gradient(#68b946,#4f9d42); */
    background-image: linear-gradient(#68b946, #4f9d42);
    box-shadow: 0 1px 0 rgba(255,255,255,0.18);
    border-color: #4f9d42;
    color: #fff !important;
    text-shadow: 0 1px 0 #3d7933;
    border:0; font-size:20px;
    font-weight:100;
    font-family:cuprum;
    cursor: pointer;
    border-radius: 3px;
    color: #FFF;
    padding: 8px 8px 8px 8px;
    }
    </style>


<!-------------------------------------------------------------->




<style type="text/css">
input.styled {
    display: none;
}
select.styled {
    position: relative;
    width: 190px;
    opacity: 0;
    filter: alpha(opacity=0);
    z-index: 5;
}
.disabled {
    opacity: 0.5;
    filter: alpha(opacity=50);
}
</style>

</head>
<body style="background:url({!URLFOR($Resource.createevents, 'createevents/images/vertical_cloth.png')});">
<div id="headercontainer">
<div id="header">
  <div id="logo"> 
    <apex:image url="{!URLFOR($Resource.NewDBEvents, 'images/boothleads_logo_with_whitetext.png')}" style="padding-top:10px;padding-left:10px;"/>
<!----
  <img src="images/boothleads_logo_with_whitetext.png" style="margin-left:20px; margin-top:10px;"/> --->

  </div>
  <!--close of logo--> 
</div>
<!--close of header--->
<div  id="ribbon"></div>
<header style="margin-bottom:0px;">
  <div id="cente
  -head" style="width: 96.8%;" class="res"> 
 
    <script>
function destroy()
{
  try{
           sessionStorage.removeItem("event");
           sessionStorage.removeItem("ticket");
           sessionStorage.removeItem("blproduct");}catch(e){}
}
</script>
    <!-- Navigation -->
    <nav>
      <ul>
        <li id="login"> <span id="login-trigger"> <span id="login-triggers"> <span id="user-panel-check"></span> <span id="user-panel-title ">My Account</span> </span> </span>
          <div id="login-content" style="z-index:9;">
            <ul>
              <li style="margin-left:0px;"><apex:outputLink value="/apex/BLN_Profile"><img src="{!URLFOR($Resource.createevents,'createevents/images/setting.png')}" alt=""/> <span>Settings</span></apex:outputLink></li>
              <li style="margin-left:0px;"><a  href="#"><img src="{!URLFOR($Resource.createevents,'createevents/images/upgrade.png')}" width="13px" height="13px" alt=""/><span>Upgrade Account</span></a></li>
              <li style="margin-left:0px;"><apex:form ><apex:commandLink onclick="destroy();" action="{!$Site.Prefix}/secur/logout.jsp"><img src="{!URLFOR($Resource.createevents,'createevents/images/logout.png')}" alt=""/><span>{!$Label.site.logout}</span></apex:commandLink></apex:form></li>
            </ul>
          </div>
        </li>
      </ul>
    </nav>
    <div class="account-name">
      <p><span class="welcome">Welcome,</span> <strong>{!$User.Firstname}&nbsp;{!$User.Lastname}</strong></p>
      <div class="account-separator"></div>
    </div>
    <div class="account-name"></div>
     
    <div id="quickbuttons" style="border:0px solid #F00;" >
<span><a title="My Events" style="text-decoration:none" href="/apex/BLN_userEvents"><img src="{!URLFOR($Resource.createevents,'createevents/images/myevents.png')}" width="79" height="45"  /></a></span>
<!--<span ><a title="My Tickets" style="text-decoration:none;  margin-left:5%" href="mytickets.htm"><img src="images/ticketstab.png" width="120"  height="44"/></a></span>-->
</div><!--close of quickbuttons-->

    <!-- Navigation end--> 
    
  </div>
</header>
</div><!-- close of headercontainer-->

<section id="middle" style="width: 96.8%; border:0px #000000 solid;" class="res" >
  <div id="container" style="border:1px #ccc solid; background-color: #EFEFEF; margin-top:10px;">
    <div id="content" style="padding:0px;">
      <div class="speedbar" style="   border:0px #FF0000 solid; background-image:url({!URLFOR($Resource.CreateEventsSteps, 'images/background-header.png')} ); height:50px; margin-right:0px; ">
        <div class="speedbar-nav" style=" margin:0px auto;  margin-left:7%;">
          <ul style="list-style:none; padding:0px; margin:0px;   display:inline;  color:#fff; font-size:20px; ">
            <li style="list-style:none; display:inline; margin-top:30px; margin-right:15px ;"><span id="chg1">Create Event</span> <span><apex:image url="{!URLFOR($Resource.CreateEventsSteps, 'images/help-arrow-step.png')}" style="margin-bottom:-8px; margin-left:15px;"/></span> </li>
            <li style="list-style:none; display:inline;margin-right:15px;"><span id="chg2"> Create Tickets </span><span><apex:image url="{!URLFOR($Resource.CreateEventsSteps, 'images/help-arrow-step.png')}" style="margin-bottom:-8px; margin-left:15px;"/></span> </li>
            <li style="list-style:none; display:inline"><span id="chg3"> Design Event</span> <span><apex:image url="{!URLFOR($Resource.CreateEventsSteps, 'images/help-arrow-step.png')}" style="margin-bottom:-8px; margin-left:15px;"/>
           </span> </li>
            <li style="list-style:none; display:inline;margin-left:15px;;"><span id="chg4"> Publish Event</span><!-- <span><img src="help-arrow-step.png" style="margin-bottom:-8px; margin-left:15px;"/></span>--> </li>
           <!--<li style="list-style:none; display:inline;margin-left:15px;;"> Payment<span style="font-size:12px; margin-left:5px; color: #33D2EE;">(Live Mode)</span></li>-->
          </ul>
        </div>
        <!--close of speedbar-nav--> 
        
      </div>
      <!-----------script for highlight label on sticky header-->
      <script>
       function highlight(chgs,chgs1,chgs2,chgs3)
       {   
     document.getElementById(chgs).style.color="#19c3fa";
     document.getElementById(chgs).style.fontweight="bold";
     document.getElementById(chgs1).style.color="#fff";
     document.getElementById(chgs2).style.color="#fff";
     document.getElementById(chgs3).style.color="#fff";

    }
      </script>
      <!------------------------------------------------------>
      <style>
      #eventsectiontbl tr td{
          padding:7px;
          font-size:13px; color:#666; font-weight:700;
           }
      </style>
      <style>
  #nwmoreinfodiv{
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(253,253,253,1)), color-stop(100%,rgba(227,227,227,1)));
background: -webkit-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: -o-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: -ms-linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
background: linear-gradient(top, rgba(253,253,253,1) 0%,rgba(227,227,227,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fdfdfd', endColorstr='#e3e3e3',GradientType=0 );
border: 1px solid #e3e3e3;
padding: 5px;
padding-bottom:1px;
border-radius: 3px;
/* padding-top: 5px; */
padding-left:6px;
float: right;
margin-right:10%;
cursor:pointer;
}
  
  </style>
      
      <!---------------Create Event---------------------->
      <div id="stepss1" style="position:relative">
      <div class="grid-1" onClick="highlight('chg1','chg2','chg3','chg4')"  style=" position:absolute;border:0px solid #4f91cd;margin-top:30px; margin-left:1.3%; position:relative;">
        <div class="content-gird"  style="background-color:#F7F7F7; padding:0px; padding-bottom:0px; box-shadow:#ccc 3px 3px 15px 2px; width:90.4%; margin:0px auto; border: 5px solid #F0F0F0;">
         
          <div class="title-grid" style="margin:0px; width:98%; height:30px;    "><span> <apex:image url="{!URLFOR($Resource.createevents,'createevents/images/step1.png')}" width="30" style="margin-top:-3px;" height="30"/></span> <p style="margin-top:0px; margin-left:3.7%;color: #3895ba; font-weight:300; font-size:20px; margin-left:3.5%; font-family:segoe ui;"> Create Event</p></div>
          <div class="form" style="width:50%; margin:0px auto; background-color:#F7F7F7;  border:0px solid #000; margin-top:30px; ">
            <table id="eventsectiontbl" width="100%" border="0">
  <tr>
    <td width="30%" style="text-align:right;">Event Name: <span id="mandatory">*</span></td>
    <td><input type="text"  id="eventname" name="eventname" value="" class="medium" onKeyUp="eventnmkeyupvalid()" onBlur="eventnmblurvalid()"/> 
     <span id="ensuccess" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/success.png')}" style="margin-bottom:-5px;"/></span>
    <span id="enerror" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/errorvalid.png')}"  style="margin-bottom:-5px;"/></span>
    </td>
    
  </tr>
  <tr>
    <td style="text-align:right;" >Event Start Date: <span id="mandatory">*</span></td>
   <td> <input type="text"  id="eventsdate" value="" class="default_datetimepicker" placeholder="__/__/____ __:__" onKeyUp="eventsdkeyupvalid()" onBlur="eventsdblurvalid()"
/>
      <span id="endpsuccess" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/success.png')}" style="margin-bottom:-5px;"/></span>
    <span id="endperror" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/errorvalid.png')}" style="margin-bottom:-5px;"/></span>
    </td>
  </tr>
  <tr>
    <td style="text-align:right;" >Event End Date: <span id="mandatory">*</span></td>
   <td> 
    <input type="text"  id="eventedate" value=""  placeholder="__/__/____ __:__" onKeyUp="eventedkeyupvalid()" onBlur="eventedblurvalid()"/> 
      <span id="endp1success" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/success.png')}" style="margin-bottom:-5px;"/></span>
    <span id="endp1error" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/errorvalid.png')}" style="margin-bottom:-5px;"/></span>
    </td>
  </tr>
  <tr>
    <td style="text-align:right;">Event Location: <span id="mandatory">*</span></td>
    <td>
    <input type="text"  id="eventlocation" value="" name="eventlocation" class="medium" onKeyUp="eventlockeyupvalid()" onBlur="eventlocblurvalid()"/>
         <span id="enlocsuccess" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/success.png')}"  style="margin-bottom:-5px;"/></span>
    <span id="endlocerror" style="display:none;"><img src="{!URLFOR($Resource.createevents,'createevents/images/errorvalid.png')}" style="margin-bottom:-5px;"/></span>
    
    </td>
  </tr>
   
  
  <tr>
  <td colspan="2" style="padding:0px;text-align:right;">
  <a  onclick="Alert5.render() " title="Add More Info" >
  <div id="nwmoreinfodiv">
 <apex:image url="{!URLFOR($Resource.createevents,'createevents/images/addmore.png')}" width="25px" height="25px"/>
 </div>
   </a>
  </td>
  </tr>
  
    <tr style="">
    <td colspan="2" style="text-align:center; padding-top:0px;">
    <!--<button class="button-a blue" style="width:45%;height:32px; " onclick="smoothScroll(document.getElementById('stepss2')); mask1()">Save</button>-->
 <a onclick="eventvalid(document.getElementById('stepss2'))"  style=" margin-top:-10px; margin-left:34%; cursor:pointer;text-decoration:none;" class="a-btn">
                        <span id="next1" class="a-btn-text">Next</span> 
                        <span class="a-btn-slide-text">Tickets</span>
                        <span class="a-btn-icon-right"><span></span></span>
                    </a>
                        
 </td>
 </tr>

<tr id="eventloader" style="display:none;">
<td colspan="2" style="text-align:center;"><img src="{!URLFOR($Resource.createevents,'createevents/images/ajaxloader.gif')}" style="margin-left:-5%; margin-top:-8px;"/></td>
</tr>
</table>

         
          </div><!--close of form--> 

         
          
          <!---------More Events info button------------>
          <div></div>
          <!--reveal pop up-----> 
         
          <div  style="margin-bottom:2px; margin-left:66.3%;"> 
        &nbsp;&nbsp; 
            
            <!------------->
       
          </div>
          <!----------> 
          <!---Close of More Events--->
         
        </div>
        <!--close of content-grid--> 
      </div>
      <!--close of grid-1-------->
       <div id="mask1overlay" style=" display:none; width:88%; height:100%; background-color:#000; opacity:0.2; position:absolute; top:0; left:5%;"></div>
      </div><!--close of stepss1-->
                    <!---script for show package div --->
                 <script>
                 
                 
                 
function showpackage(show,hide,blnewpack)
{
//for new package
document.getElementById('packagename').value='';
document.getElementById('packageprice').value='';
document.getElementById('packageqty').value='';
 mrclick=0;
var appendTxt='';
for(var j=1;j<2;j++)
           {
           appendTxt += "<tr><td><input type='text' id='one' class='pkglineitmfield' name='input_box_one[]'/></td> <td><input type='text' class='pkglineitmfield' id='three' name='input_box_three[]' /></td><td><select class='selectlist'  style='outline:none;'  onchange='checkbadgelabeledit(this);'><apex:repeat value="{!itemtypesaddon}" var="ittype"><option value='{!ittype.value}'>{!ittype.label}</option></apex:repeat></select></td><td><input type='text' id='one'   name='input_box_one[]' style='width: 85%;'/></td><td><input type='button' class='del1' value='' /></td></tr>";             
           }
           $(".dynamic2").find("tr:gt(0)").remove();
      $(".dynamic2 tbody").append(appendTxt);
//
flag=-1;
document.getElementById('savedpackageimage').src='';
isnewpackage=blnewpack;
document.getElementById(show).style.display="block";
document.getElementById(hide).style.display="none";
if(isnewpackage=="true"){
$('input[name="pkgpayradio"][value="Paid"]').attr("checked",true);
$('#pkvisib').attr('checked',true);
}

}



function checkbadgelabeledit(badgelabelcombo)
{

var table = document.getElementById("packagetable");
var row = table.rows[$(badgelabelcombo).parent().parent().index()+1];
if(badgelabelcombo.options[badgelabelcombo.selectedIndex].text!='Staff Admission'&&badgelabelcombo.options[badgelabelcombo.selectedIndex].text!='Admissions'&&badgelabelcombo.options[badgelabelcombo.selectedIndex].text!='Seats'&&badgelabelcombo.options[badgelabelcombo.selectedIndex].text!='Seminars'&&badgelabelcombo.options[badgelabelcombo.selectedIndex].text!='MatchLeads Buyer'&&badgelabelcombo.options[badgelabelcombo.selectedIndex].text!='MatchLeads Seller')
{
row.cells[3].children[0].value="";
row.cells[3].children[0].disabled="disabled";
}
else
row.cells[3].children[0].disabled=false;


}

     </script>   
     
        
          
          <!------------------------------------------------->      
     
     <!--------------------end of script-------------->
      
      <!-----------------------------------------tickets section--------------------->
      <div  id="stepss2"  style="position:relative">
      <div class="grid-1" onClick="highlight('chg2','chg1','chg3','chg4')"  style="border:0px solid #4f91cd; margin-left:1.3%;position:relative; ">
       <div class="content-gird"  style="background-color:#F7F7F7; padding:0px; padding-bottom:0px; box-shadow:#ccc 3px 3px 15px 2px; width:90.4%; margin:0px auto; border: 5px solid #F0F0F0;">
          <div class="title-grid" style="margin:0px; width:98%; height:30px;    "><span>          <apex:image url="{!URLFOR($Resource.createevents,'createevents/images/step2.png')}"  width="30" style="margin-top:-3px;" height="30"/>
</span> <p style="margin-top:0px; margin-left:3.7%;font-size:20px;color: #e35012; font-weight:300; margin-left:3.5%; font-family:segoe ui;"> Create Tickets</p></div>
           <!-- <div style=" background: url(steps%20-%20Copy/011.png) no-repeat; height:80px; margin-left:-15px; margin-top:5px; width:102.4%">-->
            <!--  <div style="width:6%; height:50px; float:left;  text-align:center;">
                <h1 style="margin-left:0px; font-size:20px; font-family: Arial, Helvetica, sans-serif; color:#928c87; font-weight:bold; padding-top:8px; ">2</h1>
                <h3 style="margin-left:0px; margin-top:-9px; font-size:17px; color:#928c87">Step</h3>
              </div>
              <div style=" width:15%;margin-left:24px;  text-align:center;    margin-top:2px; float:left; height:50px; ">
                <h1 style=" color:#FFF; font-size:19px;  padding-top:10px;">Create Tickets</h1>
              </div>-->


     
     
       <!--start of ticket dynamic table-->
         <div id="dynamictickets">
         
          <!--create package button-->
            <div id="package" style="   margin:0px; padding:0px; margin-right:0%; margin-top:10px; margin-bottom:10px; ">
        <a id="blprodlink" onClick="blprod()" style="margin-left:1%;   cursor:pointer;  font-family:Arial, Helvetica, sans-serif;">Booth Leads Products<span><img id="expblp" src="{!URLFOR($Resource.createevents,'createevents/images/Addoptions1.png')}" width="14px" height="14px" style="margin-bottom:-2px; margin-left:.3%;"/></span></a>
            
         <input type="button" class="pkgbttn"   onClick="showpackage('package1','dynamictickets','true')"   value="Create Package" style=""  />
          
        
    
              </div><!--close of createpackagebutton-->
                <!----------------------------------------->
              <div id="boothleadsprodcontents" style="display:none; margin-bottom:10px;">
              <table width="75%" border="0" >
  <tr style=" background-color:#EFEFEF;">
  <apex:outputpanel layout="none" id="theBlock">
  <apex:variable var="i" value="{!1}"/>
  <apex:repeat value="{!eventSelectOptions}" var="eveOpt">
    <td width="2%"><input type="checkbox" id="chk{!i}" onClick="lrrow(this.id,'{!eveOpt.eventOptionItemType.Item_type__r.Item_Type_Number__c}','{!eveOpt.eventOptionItemType.Item_type__r.Id}')" /></td>
      <td width="3%"><span><img src="/servlet/servlet.ImageServer?id={!eveOpt.eventOptionItemType.Item_type__r.Event_Options_Image_URL__c}&oid={!$Organization.Id}"/></span></td>
    <td  width="15%"><h1 style="color: #55585d; font-size:16px; "> {!eveOpt.eventOptionItemType.Item_type__r.Event_Option_Desc__c}</h1></td>
        <apex:variable var="i" value="{!i+1}"/>
  </apex:repeat>
    </apex:outputpanel>
  </tr>
  
</table>

              
              </div><!--close of boothleadsproductscontent-->
              
              <!----------------------------------------------------------------->
         
          <table class="display dynamic" id="tickettable" style="width:99%; margin:0px auto;" >
            <thead>
              <tr>
                <th width="32%" style="padding:3px 0px 3px 2px; text-indent:5px;">Ticket Name</th>
                <th width="29%" style="padding:3px 0px 3px 2px;text-indent:5px;">Ticket pay Type</th>
                <th width="12%" style="padding:3px 0px 3px 2px;text-indent:5px;">Qty</th>
                 <!--  <th width="10%" style="padding:3px 0px 3px 2px;text-indent:5px;">Min-Qty</th>-->
                     <!-- <th width="10%" style="padding:3px 0px 3px 2px;text-indent:5px;">Max-Qty</th>-->
                  <th width="10%" style="padding:3px 0px 3px 2px;text-indent:5px;">Price</th>
<!--                <th width="19%" style="padding:3px 0px 3px 2px;text-indent:5px;">Ticket Category</th>-->
                <th width="9%" style="padding:3px 0px 3px 2px;text-indent:5px; ">More Info</th>
                <!--<th width="7%" style="padding:3px 0px 3px 2px;text-indent:5px; ">Add Tag</th>-->
                <th ><input type="button"  class="add" value="" title='Add Ticket' /></th>
              </tr>
            </thead>
             <tbody> 
            <tr>
              <td><input type="text"   id="one" class="tickfield" name="input_box_one[]" /></td>
              <td><select class="selectlist" style="outline:none;" >
                  <apex:repeat value="{!paymentSelectOptions}" var="paytype">
                  <option value='{!paytype.value}'>{!paytype.label}</option>
                  </apex:repeat>
                </select></td>
              <td><input type='text' class="tickfield" style="width:70%;"  name='input_box_two[]' /></td>
              
               <td><input type="text" class="tickfield" id="three" name="input_box_three[]" /></td>
              
                   <td style="text-align:center;">
                   <a onClick="Alert3.render(this.parentNode.parentNode.rowIndex,this.parentNode.parentNode.children[0].children[0].value,this.parentNode.parentNode.children[1].children[0].value,this.parentNode.parentNode.children[2].children[0].value,this.parentNode.parentNode.children[3].children[0].value)"><apex:image url="{!URLFOR($Resource.createevents,'createevents/images/addmore.png')}" width="25px" height="25px"/></a>
                  </td>
                   
                   
              <td>
              <input type="button" class='del' title='Delete Ticket' value='' /></td>
     
            </tr>
            </tbody>
          
            
            
            
          </table>
        
   
            
             <dl class="Zebra_Accordion" style=" margin-top:15px; padding-bottom:0px;">
          
           <!--start of ticket options-->
          <style>
          #ticketopt tr td{ padding:2px;}
          </style>
          
          
   
          
            <dt>
            <p style="color:#FFF;  font-size:13px; font-weight:300; font-family:segoe ui;"><span><img src="{!URLFOR($Resource.createevents,'createevents/images/Addoptions.png')}" id="addicon" width="14" height="14" style=" padding-bottom:-8px;margin-right:8px; margin-bottom:-3px;"/></span>Payment Options</p>
              
            </dt>
            <dd style="height:auto; padding-bottom:90px;">
              <hr/>
              <div class="form" id="and" style="width:100%; height:auto; padding-bottom:100px; ">
                <table id="ticketopt" width="70%" border="0" style=" font-family:Cuprum; font-size:16px; color:# 999; margin-left:.5%; border-collapse:collapse; margin-bottom:20px;">
  <tr>
  <td width="16%"> <h3 style="font-size:18px; font-family:cuprum; margin-top:20px; color:#4f91cd;">Ticket Options:</h3></td>
    <td   style="padding:0px;" width="2.5%"><input type="radio"  id="inf-att" style="outline:none;"   name="tckopt" value="Collect info from All Attendees" /></td>
    <td width="30%"  style="padding:0px;" ><label for="inf-att" style="font-size:15px;">Collect info from All Attendees.</label></td>
    <td  style="padding:0px;" width="2.5%"><input type="radio" id="inf-main" style="outline:none;" checked="checked"   name="tckopt" value="Collect info from Buyers only" /></td>
    <td style="padding:0px;"><label for="inf-main" style="font-size:15px;">Collect info from main Attendee.</label></td>
  </tr>
  
</table>
 <!--end of ticket options-->
                
                <style type="text/css">
       
       .distance p{ float:none; line-height:none;}
       </style>
                <h3 style=" margin-left:5px;font-size:18px; font-family:cuprum; margin-top:20px; color:#4f91cd;">Service Fee Option for Event:</h3>
                <div id="ticketopt-content" style="width:50%; margin-left:12.3%;; margin-top:15px;  "  >
                  <ul style="font-size:15px; display:inline-block; list-style:none;">
                    <li style="display:inline-block; margin-right:20px; "> Service Fee </li>
                    <li style="display:inline-block; margin-bottom:-3px">
                      <input type="radio" style="outline:none;"  id="add" checked="checked"  name="feeopt" value="Add Booth Leads fee on top of the total ticket price" />
                    </li>
                    <label for="add"> <li style="display:inline-block; font-size:13px;">Add Booth Leads fee on top of the total ticket price </li></label>
                  </ul>
                </div>
                <!--ticketopt-content---> 
                <!-------------------------------------------------------->
                
                <div id="ticketopt-content" style="width:50%; margin-left:12.3%; margin-top:5px; margin-bottom:20px; "  >
                  <ul style="font-size:15px; display:inline-block; list-style:none;">
                    <li style="display:inline-block; margin-right:20px; width:78px; "> &nbsp; </li>
                    <li style="display:inline-block; margin-bottom:-3px;">
                      <input id="inc" style="outline:none;"  type="radio"  name="feeopt" value="Include the Booth Leads fee in to the total ticket price" />
                    </li>
                 <label for="inc"><li style="display:inline-block; font-size:13px;">Include the Booth Leads fee in to the total ticket price </li></label>
                  </ul>
                </div>
                <!--ticketopt-content---> 
                
                <!------------hide display script for payment gateway-------> 
                <script>

function showhidediv( rad )
    {
        var rads = document.getElementsByName( rad.name );
        document.getElementById( 'paypal' ).style.display = ( rads[0].checked ) ? 'block' : 'none';
        document.getElementById( 'stripe' ).style.display = ( rads[1].checked ) ? 'block' : 'none';
        document.getElementById( 'authorize' ).style.display = ( rads[2].checked ) ? 'block' : 'none';
    }


</script> 

<!--<script>

document.getElementById('check1').onchange = function() {
    document.getElementById('paycheck').style.display = this.checked ? 'block' : 'none';
};


</script>
-->
<script>
                    function noneradio(){
                        document.getElementById("paypal").style.display="none";
                        document.getElementById("stripe").style.display="none";
                        document.getElementById("authorize").style.display="none";
                        }
                    
                    </script>
<script>
function getchequestatejs(val,dfltsate)
         {              
                            
                            Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.statesBasedOnCountry}',
            val,
            function(result, event){
            var opt;
            $('#chqstate').empty(); 
            opt = document.createElement('option');
             opt.value = '';
             opt.innerHTML = '';
             document.getElementById('chqstate').add(opt); 
           $.each(result, function (i, vals) {
          
             opt = document.createElement('option');
             opt.value = vals.Id;
             opt.innerHTML = vals.Long_Name__c;
             document.getElementById('chqstate').add(opt);
             });
             if(dfltsate!='')
             document.getElementById('chqstate').value=dfltsate;      
            }, 
            {escape: true}
        );
        }
        
var companyextid='';
function hidethischeck() {
    if(document.getElementById('check1').checked){
        document.getElementById('paycheck').style.display = 'block'; 
        
        //Load the Event data
Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.getCompanyExtDetails}',
            eventmand.EventID,
           function(result, event){
           if (event.status){
           companyextid=result.Id;
           document.getElementById('chqaddr1').value=result.Business_Address1__c==undefined?'':result.Business_Address1__c;
           document.getElementById('chqaddr2').value=result.Business_Address2__c==undefined?'':result.Business_Address2__c;
           document.getElementById('chqcity').value=result.Business_City__c==undefined?'':result.Business_City__c;
           document.getElementById('chqcountry').value=result.BLN_Business_Country__c==undefined?'':result.BLN_Business_Country__c;
           document.getElementById('chqZip').value=result.Business_Zipcode__c==undefined?'':result.Business_Zipcode__c;
           getchequestatejs(document.getElementById('chqcountry').value,result.BLN_Business_State__c);
           }
           
           });
        //   
        }else{
        document.getElementById('paycheck').style.display = 'none';
    }
};
var packagelogourl='';
</script>
                
                <!-------------------------------------------------------->
                
                <h3 style=" margin-left:5px;font-size:18px; margin-top:18px; font-family:cuprum; color:#4f91cd;">Payment Gateway Option for Event:</h3>
                <div id="ticketopt-content" style="width:auto;   margin-left:12.3%;; margin-top:15px;  "  >
                  <ul style="font-size:15px; display:inline-block; list-style:none;">
                    <li style="display:inline-block; margin-top:-25px; vertical-align:middle;">
                      <input type="radio"  style="outline:none;"   onclick="showhidediv(this);"  name="pgopt" value="PayPal" />
                    </li>
                   <label for="pp">  <li style="display:inline-block; font-size:13px;  margin-right:20px;"><img src="{!URLFOR($Resource.createevents,'createevents/images/paypal-logo-transparent1.png')}" style="margin-left:-3px;"  width="60" height="30"/></li></label>
                    <li style="display:inline-block;  margin-top:-25px; vertical-align:middle;">
                      <input type="radio"  style="outline:none;"   onclick="showhidediv(this);"  name="pgopt" value="Stripe" />
                    </li>
                <label for="str"><li style="display:inline-block; font-size:13px;margin-right:20px;"><img src="{!URLFOR($Resource.createevents,'createevents/images/stripepy.png')}" width="60" height="30"/></li></label>
                    <li style="display:inline-block;  margin-top:-25px; vertical-align:middle;">
                      <input type="radio"  style="outline:none;" onclick="showhidediv(this);"  name="pgopt" value="Authorize.Net" />
                    </li>
                    <label for="aut"> <li style="display:inline-block; font-size:13px;margin-right:20px;"><img src="{!URLFOR($Resource.createevents,'createevents/images/auth-logo13.png')}" width="90"  style="margin-left:-5px;" height="30" /></li></label>
                <li style="display:inline-block;  margin-top:-25px; vertical-align:middle;">
                      <input type="radio" name="pgopt" checked="checked" onclick="noneradio()" id="nonee" style="outline:none;" value="None"/>
                    </li>
                    <label for="nonee"> <li style="display:inline-block; font-size:13px;margin-right:20px;"><img src="{!URLFOR($Resource.createevents,'createevents/images/none.png')}" style="margin-left:0px; margin-bottom:10px;"/></li></label>
                 
                 
                 <!-- onClick="hidethischeck()"-->
                  
                  </ul>
                </div>
                
              
                
                
                <!--ticketopt-content---> 
                <!-------------------------------------------------------->
                <div id="paypal" style="display:none" >
                  <h3 style="  margin-left:10px;font-size:18px; font-family:cuprum; color:#4f91cd;">For PayPal:</h3>
                  <div id="ticketopt-content" style="width:50%; margin-left:1%;">
                    <ul style="font-size:15px; display:inline-block; list-style:none;">
                      <li style="display:inline-block; margin-right:5px; ">Email Address:</li>
                      <li style="display:inline-block; margin-bottom:-3px">
                        <input type="text" style="width:100%;outline:none;" id="ppemailaddr" name="ppemailaddr" class="medium" />
                      </li>
                    </ul>
                  </div>
                  <!--ticketopt-content---> 
                </div>
                <!--close of paypal--> 
                <!---------------------------------------------------->
                <div id="stripe" style="">
                  <h3 style=" margin-top:14px; margin-left:10px;font-size:18px; font-family:cuprum; color:#4f91cd;">For Stripe:</h3>
                  <div id="ticketopt-content" style="width:70%;margin-left:4.1%;">
                    <ul style="font-size:15px; display:inline-block; list-style:none;">
                      <li style="display:inline-block; margin-right:5px; "><apex:form >
        <br/>
        <apex:outputText value="Boothleads would like you to start accepting payments with Stripe. Click below to connect." style="font-size:14px; padding-left:15px;"></apex:outputText><br/><br/>

        <apex:outputLink value="{!authorizationCodeURI}" style="padding-left:15px;">
            <apex:image value="{!$Resource.StripeConnect}"/>
        </apex:outputLink>
    </apex:form></li>
                      
                    </ul>
                  </div>
                  <!--ticketopt-content--->
                  
                  <div id="ticketopt-content" style="width:50%;margin-left:1%; margin-top:10px;">
                    <ul style="font-size:15px; display:inline-block; list-style:none;">
                      <li style="display:inline-block; margin-right:5px; ">Refresh Token:</li>
                      <li style="display:inline-block; margin-bottom:-3px">
                        <input type="text" style="width:100%; outline:none;" id="spkey" name="spkey" class="medium" value="{!jsonWrapObj.refresh_token}"/>
                      </li>
                    </ul>
                  </div>
                  <!--ticketopt-content---> 
                </div>
                <!--close of stripe--> 
                <!--------------------------------------------------------> 
                
                <!---------------------------------------------------->
                <div id="authorize" style="display:none;">
                  <h3 style=" margin-top:14px; margin-left:10px;font-size:18px; font-family:cuprum; color:#4f91cd;">For Authorize.Net:</h3>
                  <div id="ticketopt-content" style="width:50%; margin-left:2.3%;">
                    <ul style="font-size:15px; display:inline-block; list-style:none;">
                      <li style="display:inline-block; margin-right:5px; ">Authorize.net Id:</li>
                      <li style="display:inline-block; margin-bottom:-3px">
                        <input type="text" style="width:100%; outline:none;" id="authid" name="authid" class="medium" />
                      </li>
                    </ul>
                  </div>
                  <!--ticketopt-content--->
                  
                  <div id="ticketopt-content" style="width:50%; margin-left:1%; margin-top:10px;">
                    <ul style="font-size:15px; display:inline-block; list-style:none;">
                      <li style="display:inline-block; margin-right:5px; ">Authorize.net Key:</li>
                      <li style="display:inline-block; margin-bottom:-3px">
                        <input type="text" style="width:100%; outline:none;" id="authkey" name="authkey" class="medium" />
                      </li>
                    </ul>
                  </div>
                  <!--ticketopt-content---> 
                </div>
                <!--close of authorize--> 
                <!-------------------------------------------------------->
                    <!-------------------------------------------------------->
                    <!--ticketopt-content---> 
                    
                    <div  style=" margin-top:30px; margin-left:1%;">
                     
                      
                   <label for="check1" style="font-size:16px; color:#4f91cd; font-family:Cuprum; margin-right:1%">Pay By Check</Label>
                 <input type="checkbox" onClick="hidethischeck()" id="check1" style="outline:none;"  value="Check"/>
                 
                 <!-- onClick="hidethischeck()"-->
                </div>
                <!-------------------------------------------------------->
                <!-------------------------------------------------------->
                 <div id="paycheck" style="display:none; " >
                  
                 <div id="ticketopt-content" style="width:80%; margin-left:1%;; margin-top:5px; border:0px solid #F00;">
                 <style>
                 #paybycheckfields td{ padding:5px;}
                 
                 </style>   
                    
                            <table id="paybycheckfields" width="90%" border="0">
  <tr>
    <td width="13.5%" style="text-align:right;">Address 1:</td>
    <td><input type="text" width="80%" id="chqaddr1"/></td>
        <td style="text-align:right;" >Address 2:</td>
   <td style="text-align:left;"><input type="text" width="80%" id="chqaddr2"/></td>
  </tr>

  <tr>
    <td style="text-align:right;">City:</td>
   <td><input type="text" width="80%" id="chqcity"/></td>
      <td style="text-align:right;">State:</td>
    <td style="text-align:left;"><select class="selectlist" id="chqstate">
    
    </select></td>
  </tr>

  <tr>
    <td style="text-align:right;">Country:</td>
    <td ><select class="selectlist" id="chqcountry" onchange="getchequestatejs(this.value,'');">
    <apex:repeat value="{!Country}" var="ecc">
                           <option value="{!ecc.value}">{!ecc.label}
                            </option>
    </apex:repeat>
    </select></td>
    <td style="text-align:right;">Zip</td>
    <td><input id="chqZip" type="text" width="20%"/></td>
  </tr>
</table>

                  </div>
                </div>
                <!--close of paycheck--> 
                <!---------------------------------------------------->
              
                
                <div class="clear"> </div>
              </div>
              <!--close of form--> 
              
            </dd>
          </dl>    
        <div style=" margin-left:14%; margin-top:0px;margin-bottom:40px;text-align:center;">
   
   
   <a  onclick="ticketvalid()"   style=" margin-top:-10px; margin-left:32%; cursor:pointer;text-decoration:none;" class="a-btn">
                        <span id="ticketnext" class="a-btn-text" style="font-weight:700;">Next</span> 
                        <span class="a-btn-slide-text">Template</span>
                        <span class="a-btn-icon-right"><span></span></span>
                    </a>
             
            </div>  
            <div id="ticketloader" style=" display:none; margin-left:-1%; margin-top:0px;margin-bottom:40px; text-align:center;">
<img src="{!URLFOR($Resource.createevents,'createevents/images/ajaxloader.gif')}"/>

</div>

          </div><!---div dynamictickets-->
          <!-------------------------------->
          

          
          
          <!---------------------Start of Create-Package hide div-------------------------->
  
  <style type="text/css">
  .title-grid1 span {
        right: 0;
        top: 30%;
        cursor: pointer;
        width: 16px;
        height: 13px;
        margin-top:4px;
        background: url(images/trigger.png) no-repeat left bottom;
        display: block;
        font-size: 0;
        float:right;
}

.inactive .title-grid1 span {
        background-position: left top;
    }
  
  </style>
  <apex:form >
      <apex:actionfunction name="savePackageLogo" action="{!saveEventLogo}" rerender="reRenderedPanelToSetPackageVariable" oncomplete="savepackageinfo();document.getElementById('ticketloader').style.display='none';">
      <apex:param name="imageData" value="" assignTo="{!imageData}"/>
</apex:actionfunction></apex:form>
<apex:outputPanel id="reRenderedPanelToSetPackageVariable">
   <script type="text/javascript">
      packagelogourl= "{!eventlogourl}";
      
   </script>
</apex:outputPanel>
  <!---script for on click  close during package  div --->
                 <script>
                 
function showclose(show,hide)
{
document.getElementById(show).style.display="none";
document.getElementById(hide).style.display="block";


}
var pckcontents='';
                     function checkpackagelogo()
                     {
                          
                             var oFReader = new FileReader();
                     var f = document.getElementById("pklogo").files[0];
          

           if (f) {
      var r = new FileReader();
      r.onload = function(e) { 
      pckcontents= e.target.result.split(',')[1];
       document.getElementById('savedpackageimage').src=e.target.result;
                 
      }
      r.readAsDataURL(f);
     
    } else { 
      alert("Failed to load file");
    }
    
                     }

function savepackageinfo()
{
     
     
      var rowindex;
      if(isnewpackage=="true")
       rowindex=$(".dynamic tr:last").index()+1;
        else
       rowindex=parentrowindex-1;
       
       ticketlist[rowindex].trowid=rowindex;
       ticketlist[rowindex].ispackage="true";
       
       //store the package items/subgroup
       ticketlist[rowindex].subpackagegroup=[];
       var table = document.getElementById("packagetable");
       for (var i = 1, row,nhiderow=0; row = table.rows[i]; i++) {
       
        if(row.style.display!='none'){
              ticketlist[rowindex].subpackagegroup.push({pkgitemname:"",pkgitemqty:"",ttype:"",badgelabel:""});
              ticketlist[rowindex].subpackagegroup[nhiderow].pkgitemname=row.cells[0].children[0].value;
              ticketlist[rowindex].subpackagegroup[nhiderow].pkgitemqty=row.cells[1].children[0].value;
              
              ticketlist[rowindex].subpackagegroup[nhiderow].ttype=row.cells[2].children[0].value;
              ticketlist[rowindex].subpackagegroup[nhiderow].badgelabel=row.cells[3].children[0].value;
              nhiderow++;
         }
       }
       
       //
      
       //store the package more ingo group
        ticketlist[rowindex].grouptickets=[];
       var table = document.getElementById("packagemoreinfotable");
       for (var i = 1, row,nhiderow=0; row = table.rows[i]; i++) {
       
        if(row.style.display!='none'){
              ticketlist[rowindex].grouptickets.push({tname:"",sdate:"",edate:"",qty:"",minqty:"",maxqty:"",tprice:""});
              ticketlist[rowindex].grouptickets[nhiderow].tname=row.cells[0].children[0].value;
              ticketlist[rowindex].grouptickets[nhiderow].sdate=row.cells[1].children[0].value;
              ticketlist[rowindex].grouptickets[nhiderow].edate=row.cells[2].children[0].value;
              ticketlist[rowindex].grouptickets[nhiderow].qty=row.cells[3].children[0].value;
              ticketlist[rowindex].grouptickets[nhiderow].minqty=row.cells[4].children[0].value;
              ticketlist[rowindex].grouptickets[nhiderow].maxqty=row.cells[5].children[0].value;
              ticketlist[rowindex].grouptickets[nhiderow].tprice=row.cells[6].children[0].value;
              
              nhiderow++;
         }
       }
       //
              ticketlist[rowindex].itemtype=document.getElementById('pkitemtype').value;
              ticketlist[rowindex].tpaytype=document.querySelector('input[name="pkgpayradio"]:checked').value;
              ticketlist[rowindex].tvisib=$('#pkvisib').attr('checked');
              ticketlist[rowindex].tdesc=document.getElementById('pkdesc').value;
              //Adding PackageLogo
          
  if(packagelogourl!=''){
  ticketlist[rowindex].tcketlogo=packagelogourl;
  pckcontents='';
  packagelogourl='';
  }
  //set the tags array to null
                                   
                                  ticketlist[rowindex].tags=[];


//code for adding tags
                             var testimonialElements = $(".resultspk");
                             
                             for(var f=0,tgindex=0; f<testimonialElements.length; f++){
                                  
                                  var element = testimonialElements.eq(f);
                                  if(element[0].children[0].children[0].children[0].children[0].checked){
                                  ticketlist[rowindex].tags.push({tagname:""});
                                  //store eventtag id
                                  ticketlist[rowindex].tags[tgindex].tagname=getKeyByValue(TagMap,element[0].children[0].children[0].children[1].innerHTML);
                                  tgindex++;
                                  }
                                  }
                             //end of tags
                             //
       //
       ticketlist[rowindex].ticketcount=nhiderow;
       //
        if(isnewpackage=="false")
        {
              document.getElementById("tickettable").rows[parentrowindex].cells[0].children[0].value=document.getElementById('packagename').value;
              document.getElementById("tickettable").rows[parentrowindex].cells[2].children[0].value=document.getElementById('packageqty').value;
               document.getElementById("tickettable").rows[parentrowindex].cells[3].children[0].value=document.getElementById('packageprice').value;
               document.getElementById("tickettable").rows[parentrowindex].cells[1].children[0].value=document.querySelector('input[name="pkgpayradio"]:checked').value;
        }
      else{ 
var appendTxt = "<tr><td><input type='text' id='one' class='tickfield' name='input_box_one[]' value='"+document.getElementById('packagename').value+"'></td> <td><SELECT id='ppptype"+rowindex+"' class='selectlist' NAME=\"Animal\"><apex:repeat value="{!paymentSelectOptions}" var="paytype"><option value='{!paytype.value}'>{!paytype.label}</option></apex:repeat></SELECT><script>document.getElementById('ppptype"+rowindex+"').value='"+ticketlist[rowindex].tpaytype+"';<\/script></td></td><td><input type='text' class='tickfield' name='input_box_two[]' value='"+document.getElementById('packageqty').value+"'/></td><td><input type='text' class='tickfield' id='three' name='input_box_three[]' value='"+document.getElementById('packageprice').value+"' /></td><td style='text-align:center;'><a onClick=Alert3.render(this.parentNode.parentNode.rowIndex,this.parentNode.parentNode.children[0].children[0].value,this.parentNode.parentNode.children[1].children[0].value,this.parentNode.parentNode.children[2].children[0].value,this.parentNode.parentNode.children[3].children[0].value)><div id='nwmoreinfodiv' style='margin-right:32%;'><img src={!URLFOR($Resource.createevents,'createevents/images/addmore.png')} width='25px' height='25px'/></div></a></td> <td><input type='button' class='del' value='' /></td></tr>";
      $(".dynamic tbody").append(appendTxt); 
      if(ticketlist[0].trowid=='')
      {
         ticketlist.splice(0, 1);
         ticketlist.push({tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""});
            
      }
      }
       
}
     </script>         
     
     <!--------------------end of script-------------->
  
  
          <div id="package1" style="width:99%; margin:0px auto; margin-top:20px;  height:auto; display:none;"> 
         
          
           <div class="grid-1" style=" width:100%; margin-left:0px;"  >
          <div class="title-grid1" style=" border:0px solid #000;"><span></span>
          <img src="{!URLFOR($Resource.createevents,'createevents/images/redheaderbg.png')}"  style="margin-top:-8px; 
          margin-left:-2%;"/> <p style="color:#FFF; font-size:16px; font-family:segoe ui; margin-top:-34px;">Create Package </p>
          
        </div><!--close of title-grid1-->
          
          <div class="content-gird"  style=" border: 1px solid #e3e3e3; background-color:#F6F6F6; padding:0px;">
           <!----------------------Dynamic Table for Package-------------------------->
            <table width="100%" border="0" style="border-collapse:collapse;  background-color:#F6F6F6; padding:5px; border-top: 1px solid #BDBDBD;border-bottom: 0px solid #BDBDBD; font-size:13px; color:#424242; 
          font-family:Arial, Helvetica, sans-serif;">
          <tr>
          <td  style="font-size:17px; text-align:left;  text-indent:10px; color: #4f91cd;font-family:cuprum">1.</td>
    <td width="10%" height="55px"  style="texr-indent:5px; text-align:right;">Package Name:</td>
    <td width="20%" style="">      <input type="text"  id="packagename" name="packagename" class="medium" onKeyUp="pkgnmkeyupvalid()" onBlur="pkgnmblurvalid()"
  style="width:78%;margin-left:10px;"/></td>
   
    <td width="12%" style="text-align:right;">Price:</td>
    <td width="10%">      <input type="text"  id="packageprice" name="packageprice" class="medium" style="margin-left:10px; width:60%;" onKeyUp="pkgpricekeyupvalid()" onBlur="pkgpriceblurvalid()"
/></td>
     <td width="16%" height="55px" style="text-align:right;">Quantity:</td>
    <td width="20%">      <input type="text"  id="packageqty" name="packageqty" class="medium" style="margin-left:10px;width:80%;" onKeyUp="pkgqtykeyupvalid()" onBlur="pkgqtyblurvalid()"/></td>

  <td  >
  <a onClick="Alert4.render(this.parentNode.parentNode.children[2].children[0].value,this.parentNode.parentNode.children[4].children[0].value,this.parentNode.parentNode.children[6].children[0].value)">
  <div id="nwmoreinfodiv">
 <apex:image url="{!URLFOR($Resource.createevents,'createevents/images/addmore.png')}" width="25px" height="25px"/>
 </div>
   </a>
  <!--<a href="#" style="text-decoration:none;color: #FFF;" data-reveal-id="morepackageinfo" data-animation="none">
   <img id="ticketinfo" src="creditcards/document_add.png" title="Add more info">
   </a> -->
 </td>
  </tr>
  
 
  
</table>
<!--------------------------------------------------------------------------> 
          <table class="display dynamic2" id="packagetable" style="width:100%; margin:0px auto; margin-top:0px;" >
            <thead>
              <tr>
                <th width="33%" style="padding:3px 0px 3px 2px; text-indent:5px;">Package Item Name</th>
              
                <th width="16.5%" style="padding:3px 0px 3px 2px;text-indent:5px;">Package Item Qty</th>
                 <!-- <th width="11%" style="padding:3px 0px 3px 2px;text-indent:5px;">Price</th>-->
                <th width="26%" style="padding:3px 0px 3px 2px;text-indent:5px;">Ticket Type</th>
             <!--   <th width="9%" style="padding:3px 0px 3px 2px;text-indent:5px; ">More Info</th>-->
                  <th width="20%" style="padding:3px 0px 3px 2px;text-indent:5px;">Badge label</th>
   
                  
                <th width=""><input type='button' class='add1' value='' /></th>
              </tr>
            </thead>
            <tbody></tbody>
            
          </table>
          <!-------------------------------->   
           <div style="margin-top:10px; margin-bottom:5px; text-align:right;">
   
                        <button class="button-a blue" onClick="pkgvalid();return false;" >Apply</button>
                        &nbsp;&nbsp;
                        <button class="button-a dark-blue" onClick="showclose('package1','dynamictickets')" >Cancel</button>
               </div>
                      
          
          
          </div></div>
          
          </div>
          
          
          <!------------------------End of create Package Div------------------------->
         
          
        
         
        </div>
        <!--close of content-grid--> 
      </div>
      <!--close of grid-1--------> '
        <div id="mask2overlay" style=" width:87.5%; height:95.5%; display:; background-color:#fff; opacity:0.9; position:absolute; top:0; left:5.6%;"></div>
      </div><!--close of stepsss2-->
      <!--------------------------------------------------------> 
      
      <!--------------pick template section---------------------------------------------->
      
     <div  id="stepss3"  style="position:relative">
      <div class="grid-1" onClick="highlight('chg3','chg2','chg1','chg4')"   style="border:0px solid #4f91cd; margin-top:8px; margin-left:1.3%;position:relative; "> 
        <!-- <div class="title-grid"></div>-->
         <div class="content-gird"  style="background-color:#F7F7F7; padding:0px; padding-bottom:60px; box-shadow:#ccc 3px 3px 15px 2px; width:90.4%; margin:0px auto; border: 5px solid #F0F0F0;">
                  

          <div class="title-grid" style="margin:0px; width:98%; height:30px;    "><span>  <apex:image url="{!URLFOR($Resource.createevents,'createevents/images/step3.png')}"  width="30" style="margin-top:-3px;" height="30"/></span> <p style="margin-top:0px; font-size:20px; margin-left:3.7%;color: #a1b43e; font-weight:300; margin-left:3.5%; font-family:segoe ui;"> Pick Template</p></div>
            
          <style type="text/css">
            #temp{ width:80px; margin-top:0px; height:80px; padding:0px; margin-right:25Px;  background-color:#000; }
             #radio-temp{ width:20px; margin-top:5px;  height:auto;  padding:0px; margin-right:10px; margin-left:26px; }
  
            
            </style>
                     
          <div  style="width:100%;  height: auto; text-align:center;">
            <ul style=" display: inline-block; margin:20px 0px 10px 0px; padding:0px;">
             <apex:repeat value="{!regTemplates}" var="r">
              <li style=" display:inline-block; margin:0px; padding:0px;">
              <label for="t1" >
              <a href="#"  title="Preview" target="_blank"  style=" cursor:pointer;">  
              <div id="temp"  style="background :url(/servlet/servlet.ImageServer?id={!r.Template_Image_URL__c}&oid={!$Organization.Id})  no-repeat;"> </div> </a>
              </label>
                <div id="radio-temp">
                  <input type="radio"  style="outline:none;" name="regtemp" value="{!r.id}"  />
                </div>
              </li>
              </apex:repeat>
           
              
            </ul> 
          </div>
          <div  style=" margin-left:14%; margin-top:30px; text-align:center;">
          <a onclick="document.getElementById('picktemplateloader').style.display='';smoothScroll(document.getElementById('stepss4')); mask3();document.getElementById('picktemplateloader').style.display='none';"     style=" margin-top:-10px; margin-left:33.5%; cursor:pointer;text-decoration:none;" class="a-btn">
                        <span class="a-btn-text" style="font-weight:700;">Next</span> 
                        <span class="a-btn-slide-text">Publish</span>
                        <span class="a-btn-icon-right"><span></span></span>
                    </a>
              <!--<button class="button-a blue" style="width:10%;height:32px; ">Save</button>-->
            </div>
            <div id="picktemplateloader" style=" display:none; margin-left:-1%; margin-top:70px; text-align:center;">
<img src="{!URLFOR($Resource.createevents,'createevents/images/ajaxloader.gif')}"/>
</div>

            
        </div>
        <!--close of content-grid--> 
      </div>
      <!--close of grid-1--------> 
     <div id="mask3overlay" style=" display:; width:87.5%; height:100%; background-color:#fff; opacity:0.9; position:absolute; top:0; left:5.6%;"></div>
      </div>
      <!-----------script for hide and show divs for publish--------------> 
      <script >
      var totalblprice=0;
function show(show)
{
document.getElementById(show).style.display="block";

var appendtxt=''
totalblprice=0;
var blflag=0;
for(i=0;i<ticketlist.length;i++)
{
    if(ticketlist[i].trowid!=''){
    for(j=0;j<boothleadproduct.length;j++)
    if(ticketlist[i].itemtype==boothleadproduct[j].ttypeid){
    blflag=1;
    boothleadproduct[j].tqty=ticketlist[i].tqty;
    appendtxt+="<tr><td>"+boothleadproduct[j].tname+"<\/td><td>"+boothleadproduct[j].tqty+"<\/td><td>$ "+(boothleadproduct[j].tprice*boothleadproduct[j].tqty)+"<\/td><\/tr>";
    totalblprice+=(boothleadproduct[j].tprice*boothleadproduct[j].tqty);
    break;
    }
   
    }
}
appendtxt+='<tr><td style="text-align:left; border-top:1px solid #9C9C9C; border-bottom:1px solid #9C9C9C;font-weight:700;">Total:</td><td style=" border-top:1px solid #9C9C9C;border-bottom:1px solid #9C9C9C;">&nbsp;</td><td style=" border-top:1px solid #9C9C9C;border-bottom:1px solid #9C9C9C;" >$ '+totalblprice+'</td></tr>';
$(".ordersummarytable").find("tr:gt(0)").remove();
      $(".ordersummarytable").append(appendtxt);

if(blflag==0)
hide(show);
}
function hide(hide)
{

document.getElementById(hide).style.display="none";
}
</script>
<!------------------------Publish event---------------------------->
    <div  id="stepss4"  style="position:relative">
      <div class="grid-1" onClick="highlight('chg4','chg2','chg3','chg1')"  style="border:0px solid #4f91cd;  margin-left:1.3%; position:relative; "> 
        <!-- <div class="title-grid"></div>-->
         <div class="content-gird"  style="background-color:#F7F7F7; padding:0px; padding-bottom:0px; box-shadow:#ccc 3px 3px 15px 2px; width:90.4%; margin:0px auto; border: 5px solid #F0F0F0;">
          
          <div class="title-grid" style="margin:0px; width:98%; height:30px;    "><span>  <apex:image url="{!URLFOR($Resource.createevents,'createevents/images/step4.png')}"  width="30" style="margin-top:-3px;" height="30"/></span> <p style="margin-top:0px;font-size:20px; margin-left:3.7%;color: #8d36c7; font-weight:300; margin-left:3.5%; font-family:segoe ui;"> Publish Event</p></div>
        <!--  <div class="title-grid" style="margin:0px; width:98%; height:80px; background:none;  border:none; ">
            <div style=" background: url(steps%20-%20Copy/044.png) no-repeat; height:80px; margin-left:-15px; margin-top:5px; width:100%">
              <div style="width:6%; height:50px; float:left;  text-align:center;">
                <h1 style="margin-left:0px; font-size:20px; font-family: Arial, Helvetica, sans-serif; color:#928c87; font-weight:bold; padding-top:8px; ">4</h1>
                <h3 style="margin-left:0px; margin-top:-9px; font-size:17px; color:#928c87">Step</h3>
              </div>
              <div style=" width:15%;margin-left:24px;  text-align:center;    margin-top:2px; float:left; height:50px; ">
                <h1 style=" color:#FFF; font-size:19px;  padding-top:10px;">Publish Event</h1>
              </div>
            </div>
          </div>-->
          <br/>
        
          <div style="border:0px solid #000; width:100%;">
          <label style=" margin-left:10px; font-size:18px; color:#4f91cd; font-family:cuprum;" >Choose Publish mode:</label>
        
            <div class="indent distance" style=" border:0px solid #000;margin-top:5px; margin-left:170px; font-size:14px; " >
              <input type="radio" id="dr" checked="checked" onClick="hide('payment')" style="margin-left:10px;outline:none;"  name="evestat" value="Draft" />
              <span style="margin-left:5px;"><label for="dr" style="float:none">Draft</label></span> <br/>
              <br/>
              <input type="radio" id="li" onClick="show('payment')" style="margin-left:10px;outline:none;"  name="evestat" value="Live"/ >
              <span style="margin-left:5px;"><label for="li" style="float:none">Live</label></span> <br/>
              <br/>
              <input type="radio" id="ps" onClick="hide('payment')"  style="margin-left:10px;outline:none;" name="evestat" value="Pause" />
              <span style="margin-left:5px;"><label for="ps" style="float:none">Pause</label></span> <br/>
              <br/>
              <br/>
              <br/>
              <br/>
            
            </div>
          <!--------start of payment hide and show------------->
           <!--------start of payment hide and show------------->
            <style>
            #ordersummarytitles{
                border-collapse:collapse;
                font-size: 22px;
color: #5283cc;
margin-right: 10px;
letter-spacing: .5px;
font-family: Bebas Neue;
font-weight: normal;
                }
                
            #ordersummarytitles td{ padding:0px 5px ;}
            #ordersummarycontent table { border-collapse:collapse;}
            #ordersummarycontent table tr{ border-bottom:1px solid #ffffff;}
            #ordersummarycontent table td{ padding:5px; text-align:center; font-size:14px;} 
            #paymentwrapper{width:90%;  margin:0px auto; padding:10px; border: 4px solid #ffffff;background-image:url({!URLFOR($Resource.createevents,'createevents/images/background.gif')} ); ;box-shadow: 0 1px 3px 0 #b5b5b5;-moz-box-shadow: 0 1px 3px 0 #b5b5b5;-webkit-box-shadow: 0 1px 3px 0 #b5b5b5;}
            #ordersummarytitle{ font-size:16px; font-family:cuprum; background-color:#D7D7D7;} 
 </style>
            
            <div id="payment" style="width:100%; display:none;  padding-bottom:30px;">
            <div id="paymentwrapper" style="">
           <!---Start of titles----------->
            <table id="ordersummarytitles" width="100%" border="0">
  <tr> 
    <td width="14%" style=" text-align:right;font-family: Bebas Neue;; font-size:22px; text-align:left; color:#5283cc;"  >Order Summary</td>
    <td width="30%"> <div id="stripe-line" style="margin-top:0px;"></div><!--close fo stripe-line--></td>
    <td width="21%" style=" text-align:right; font-family: Bebas Neue;; font-size:22px; text-align:left;text-indent: 20px; color:#5283cc;">Payment Information</td>
    <td width=""> <div id="stripe-line" style="margin-top:0px;"></div><!--close fo stripe-line--></td>
  </tr>
</table>
 <!---close of titles----------->
            <div id="paymentcontentwrapper" style="width:99%; display:inline-block; padding:5px 5px 0px 5px; margin-top:0px;">
            <div id="ordersummarycontent" style="width:44%; display:inline-block; height:auto; background-color:#f8f8f8; border: 1px solid #ffffff;">
            <table width="100%" border="0" style="background-color:#F8F8F8;" class="ordersummarytable">
  <tr id="ordersummarytitle">
    <td style="text-align:center;">Item</td>
    <td style="text-align:center;">Quantity</td>
    <td style="text-align:center;">Price</td>
  </tr>
  
   
</table>

            
            </div><!--close of ordersummary content-->
           
           
           
           
           
            <div id="paymentdetailscontent" style="width:52%; border:1px solid #ffffff; display:inline-block; padding:5px ; margin-bottom:5px; background-color:#f8f8f7; float:right;">
           <div  id="cardholder" style="height:220px; margin-left:13%;background :url({!URLFOR($Resource.createevents,'createevents/images/111.png')} )  no-repeat; ">
            <div style="width:83%; margin:0px auto; height:80px;"></div>
             <div id="cardno" style="width:86%; margin:0px auto; height:44px;">
             
             <input type="text" id="cardnumber" placeholder="Enter Number" style=" width:80%;outline:none; background:none; font-size:14px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/> 
             
             </div><!--close of cardno-->
             
             <div style="width:100%; height:35px; "></div>
              <div style="width:34%; height:37px; margin-left:7.5%; float:left;">
             <select class="selectlist" style="outline:none; width:70%; margin-top:2px; height:100%; background:none;border:none;" id="cardmonth">
                   <option>- Month -</option>
                  <option value="1">January (01)</option>
                  <option value="2">February (02)</option>
                   <option value="3">March (03) </option>
                      <option value="4">April (04)</option>
                  <option value="5">May (05)</option>
                   <option value="6">June (06)</option>
                      <option value="7">July (07)</option>
                  <option value="8">August (08)</option>
                   <option value="9">September (09)</option>
                      <option value="10">October (10)</option>
                  <option value="11">November (11)</option>
                   <option value="12">December (12)</option>
                </select>   
             </div>
             
             <!-------------------------------------------->
              <div style="width:21%; height:37px; margin-left:-3.5%; float:left;">
                    <!--       <input type="date" placeholder="January (01)" style="width:99%;background:none; margin-left:3%;   font-size:9px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/>-->
               <select class="selectlist" style="outline:none; width:88%; margin-top:2px; height:100%; background:none;border:none;" id="cardyear">
    <option>- Year -</option>
     <option value="2020">2020</option>
    <option value="2019">2019</option>
    <option value="2018">2018</option>
    <option value="2017">2017</option>
    <option value="2016">2016</option>
    <option value="2015">2015</option>
    <option value="2014">2014</option>
    
</select>
              </div>
             <!-------------------------------------------->
             <!------------------------------------------->
             <div style="width:16%; height:39px; margin-left:2%;  float:left;">
                    <!--       <input type="date" placeholder="January (01)" style="width:99%;background:none; margin-left:3%;   font-size:9px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/>-->
                  <input type="text" id="cardcvv" placeholder="ABC" style=" outline:none;width:92%; background:none; font-size:14px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none" />
              </div>
             <!----------------------------------------------->
           </div><!--close of cardholder-->
         
            </div><!--close of paymentetailscontent-->
           
            </div><!--close of paymentcontentwrapper-->
            
            </div><!--close of paymentwrapper-->
            
            
            </div><!--close of payment-------->
         
         
         
         
         
         
         
         
          </div>
          
        </div>
        
        <!--close of content-grid--> 
      </div>
      
      <!--close of grid-1-------->
       
          <div id="mask4overlay" style=" width:87.5%; height:100%; background-color:#fff; opacity:0.9; position:absolute; top:0; left:5.6%;"></div>
      </div><!--close of stepss4-->
      <!------------------------>
      
      <div class="grid-1" style="border:0px solid #4f91cd; margin-top:8px; margin-left:1.3%; ">
        <div class="content-gird"  style="background-color:#EFEFEF; padding:0px; border:none;  width:90.4%; margin:0px auto; text-align:left; ">
          <div style=" width:25%;  height:32px;  float:right; margin-top:10px;">
            <button class="button-a blue" style="width:45%;height:32px; "  onClick="finalsave();">Save</button>
            &nbsp;&nbsp;
            <button class="button-a dark-blue" style="width:45%; height:32px; "  >Cancel</button>
          </div>
        </div>
      </div>
      <!----------------------------------->
      <script>
      function finalsave()
      {
            Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.BLN_EventsConTest.savesFinalEvent}',
            document.querySelector('input[name="regtemp"]:checked').value,
            document.querySelector('input[name="evestat"]:checked').value,
            eventmand.EventID,
            totalblprice,
            document.getElementById('cardnumber').value,
            document.getElementById('cardmonth').value,
            document.getElementById('cardyear').value,
            document.getElementById('cardcvv').value,
            function(result, event){
            if (event.status){
            //sucess code
           alert(result);
           if(result=='success'){
           try{
           sessionStorage.removeItem("event");
           sessionStorage.removeItem("ticket");
           sessionStorage.removeItem("blproduct");}catch(e){}
           window.location.href='https://blnew-boothleads.cs14.force.com/BLN_UserEvents';
           
           }
             }  
             else if (event.type === 'exception') {
                    alert(event.message + " " + event.where + " ");
                } else {
                    alert(event.message);
                }         
            }, 
            {escape: true}
        );
      }
      </script>
      
      <div class="clear"></div>
    </div>
    <!-- #content--> 
  </div>
  <!-- #container-->
  
  <footer style="width:100%; padding:0px;">
    <div class="info-footer" style="margin:0px;" >
      <div id="left">
        <p>Copyright  2014  Global Nest.</p>
      </div>
      <div id="right">
        <p>Booth Leads </p>
      </div>
    </div>
  </footer>
</section>
<!-- #middle-->

  <script type="text/javascript" src="{!URLFOR($Resource.datetimepicker, 'datetimepicker/jquery.datetimepicker.js')}"></script>           
         <script>



$('#eventsdate').datetimepicker({
formatTime:'g:i A', 
formatDate: 'Y/m/d',
defaultTime:'9:00 AM',
onChangeDateTime:function(dp,$input){
    $('#eventedate').val($input.val());
  }
});
$('#eventsdate').datetimepicker({value:'',step:15});

$('#eventedate').datetimepicker({
formatTime:'g:i A', 
formatDate: 'Y/m/d',
defaultTime:'9:00 AM'
});

$('#eventedate').datetimepicker({value:'',step:15});

$('#meventsdate').datetimepicker();
$('#meventsdate').datetimepicker({value:'',step:15});

$('#meventedate').datetimepicker();
$('#meventedate').datetimepicker({value:'',step:15});

$m=jQuery.noConflict();
$m(document).on('focus',".datetimepickers", function(){
  
    $m(this).datetimepicker({value:'',step:15});
});


</script>

<!------------------scripts------------------------------------------>

 <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/jquery.min.js')}"></script> 


<script type="text/javascript">
$(document).ready(function() {
    var nav =$('.speedbar');
    var banner=$('#headercontainer');
    
    $(window).scroll(function(){
        var windowpos=$(window).scrollTop();
        if (windowpos>=banner.outerHeight()){
            nav.addClass('fixedtop');
        }
            else{
                nav.removeClass('fixedtop');
                }
    }
)

});
</script>
<!-------------------Zebra Accordian---------------->
 <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/zebra_accordion.src.js')}"></script>  

<script >
var flagexp=0;
  $(document).ready(function() {
  var myAccordion = new $.Zebra_Accordion($('.Zebra_Accordion'));
  $( ".Zebra_Accordion dt" ).click(function() {
                        if(flagexp==0)
                        {
                             flagexp=1;
                            <!-- alert('expanded2');-->
                             document.getElementById("addicon").src="{!URLFOR($Resource.createevents,'createevents/images/minusoptions.png')}";
                             
                        }
                        else
                        {
                             <!--alert('expanded');-->
                              document.getElementById("addicon").src="{!URLFOR($Resource.createevents,'createevents/images/Addoptions.png')}"
                             flagexp=0;
                        }
}); 
    
});
    
  </script>
  <!-----------dynamic Add or delete rows----------------->
<script type="text/javascript">
            $(document).ready(function(){
               
                $('.del').live('click',function(){
               
               
              
           for(var j=0;j<ticketlist.length;j++)
           {
           
           if(ticketlist[j].trowid==($(this).parent().parent().index()+1)){
          
            ticketlist.splice(j, 1);
            ticketlist.push({tname:"",tpaytype:"",tqty:"",tprice:"",tvisib:"",tdesc:"",tcketlogo:"",tbdglabel:"",trowid:"",grouptickets:[],ticketcount:"",tags:[],subpackagegroup:[],ispackage:"",itemtype:""});
            break;
            }
           
           }
                
                $(this).parent().parent().remove();
                        
                });
                
                $('.add').live('click',function(){
                    
                    var appendTxt = "<tr><td><input type='text' id='one' class='tickfield' name='input_box_one[]' /></td> <td><SELECT class=' selectlist ' NAME=\"Animal\"><apex:repeat value="{!paymentSelectOptions}" var="paytype"><option value='{!paytype.value}'>{!paytype.label}</option></apex:repeat></SELECT></td><td><input type='text' name='input_box_two[]' class='tickfield'/></td><td><input type='text' id='three' name='input_box_three[]' class='tickfield'/></td><td ><a onClick='Alert3.render(this.parentNode.parentNode.rowIndex,this.parentNode.parentNode.children[0].children[0].value,this.parentNode.parentNode.children[1].children[0].value,this.parentNode.parentNode.children[2].children[0].value,this.parentNode.parentNode.children[3].children[0].value)' title='Add More Info'><div id='nwmoreinfodiv' style='margin-right:32%;'><img src='{!URLFOR($Resource.createevents,'createevents/images/addmore.png')}' width='25px' height='25px'/></div></a></td> <td><input type='button' class='del' value='' /></td></tr>";
                    
      $(".dynamic tbody").append(appendTxt);         
                });        
            });
        </script>
        <!-- <td><img id='addtag-img' onclick='Alert.render()' src='images/tag.png'   title='Add Tag'/></td>-->
<!-----------end of dynamic table js---------------------->

<!-----------dynamic Add or delete rows for package----------------->

<script type="text/javascript">
            $(document).ready(function(){       
                
                $('.del1').live('click',function(){
                    $(this).parent().parent().remove();
                        
                });
                
                $('.add1').live('click',function(){
                    
                    var appendTxt = "<tr><td><input type='text' id='one' class='pkglineitmfield' name='input_box_one[]' /></td> <td><input type='text' class='pkglineitmfield' id='three' name='input_box_three[]' /></td><td><select class='selectlist'  style='outline:none;' onchange='checkbadgelabeledit(this);'><apex:repeat value="{!itemtypesaddon}" var="ittype"><option value='{!ittype.value}'>{!ittype.label}</option></apex:repeat></select></td><td><input type='text' id='one'   name='input_box_one[]' style='width: 85%;' /></td><td><input type='button' class='del1' value='' /></td></tr>";
                    $(".dynamic2 tbody").append(appendTxt);            
                });        
            });
        </script>
<!-----------end of dynamic table js---------------------->





<!-----------dynamic Add or delete rows for package in moreinfo popup----------------->
<script type="text/javascript">
            $(document).ready(function(){       
                
                $('.del3').live('click',function(){
                    $(this).parent().parent().remove();
                        
                });
                
               $('.add3').live('click',function(){
                   
                    var appendTxt = "<tr><td><input type='text' id='one' name='input_box_one[]' /></td> <td><input type='text' style='width:75%' class='datetimepickers' class='small'/></td><td><input type='text' style='width:75%' class='datetimepickers' class='small'/></td><td><input type='text' id='three' name='input_box_three[]' /></td><td> <input type='text' id='three' name='input_box_three[]'/></td></tr>";
                    $(".dynamic4 tr:last").after(appendTxt);            
                });       
            });
        </script>
<!-----------end of dynamic table js---------------------->
  <!-----------dynamic Add or delete rows for ticket in moreinfo popup----------------->
<script type="text/javascript">
            $(document).ready(function(){       
                
                $('.del2').live('click',function(){
                    $(this).parent().parent().remove();
                        
                });
                
                $('.add2').live('click',function(){
                    $(this).val('');
                    $(this).attr('class','del2');
                    var appendTxt = "<tr><td><input type='text' id='one' name='input_box_one[]' /></td> <td><input type='text' style='width:75%' class='datepicker' class='small'/></td><td><input type='text' style='width:75%' class='datepicker' class='small'/></td><td><input type='text' id='three' name='input_box_three[]' /><td><input type='text' id='three' name='input_box_three[]' /></td><td><input type='text' id='three' name='input_box_three[]' /></td></td><td><input type='text' id='three' name='input_box_three[]' /></td>  <td><input type='button' class='add2' value='' /></td></tr>";
                    $(".dynamic3 tr:last").after(appendTxt);            
                });        
            });
        </script>
<!-----------end of dynamic table js---------------------->

  <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/jquery-ui-1.8.16.custom.min.js')}"></script>  
 

 <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/fancybox.js')}"></script> 


 <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/chosen.jquery.min.js')}"></script> 

 <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/autoresize.jquery.min.js')}"></script> 


 <script type="text/javascript" src="{!URLFOR($Resource.createevents, 'createevents/js/functions.js')}"></script> 

<!--End of script for datetimepicker-->
<div class="clear"></div>
</body>
</html>
</apex:page>